var vendor=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=48)}([function(t,e,n){var r=t.exports={},i=n(1);r.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},r.crossVZ=function(t,e,n){return r.rotate(t,e,-Math.PI/2),r.scale(t,t,n),t},r.crossZV=function(t,e,n){return r.rotate(t,n,Math.PI/2),r.scale(t,t,e),t},r.rotate=function(t,e,n){if(0!==n){var r=Math.cos(n),i=Math.sin(n),o=e[0],a=e[1];t[0]=r*o-i*a,t[1]=i*o+r*a}else t[0]=e[0],t[1]=e[1]},r.rotate90cw=function(t,e){var n=e[0],r=e[1];t[0]=r,t[1]=-n},r.toLocalFrame=function(t,e,n,i){r.copy(t,e),r.sub(t,t,n),r.rotate(t,t,-i)},r.toGlobalFrame=function(t,e,n,i){r.copy(t,e),r.rotate(t,t,i),r.add(t,t,n)},r.vectorToLocalFrame=function(t,e,n){r.rotate(t,e,-n)},r.vectorToGlobalFrame=function(t,e,n){r.rotate(t,e,n)},r.centroid=function(t,e,n,i){return r.add(t,e,n),r.add(t,t,i),r.scale(t,t,1/3),t},r.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,n){return t[0]=e,t[1]=n,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},r.div=r.divide,r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},r.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},r.reflect=function(t,e,n){var r=e[0]*n[0]+e[1]*n[1];t[0]=e[0]-2*n[0]*r,t[1]=e[1]-2*n[1]*r},r.getLineSegmentsIntersection=function(t,e,n,i,o){var a=r.getLineSegmentsIntersectionFraction(e,n,i,o);return!(a<0)&&(t[0]=e[0]+a*(n[0]-e[0]),t[1]=e[1]+a*(n[1]-e[1]),!0)},r.getLineSegmentsIntersectionFraction=function(t,e,n,r){var i,o,a=e[0]-t[0],s=e[1]-t[1],u=r[0]-n[0],c=r[1]-n[1];return i=(-s*(t[0]-n[0])+a*(t[1]-n[1]))/(-u*s+a*c),o=(u*(t[1]-n[1])-c*(t[0]-n[0]))/(-u*s+a*c),i>=0&&i<=1&&o>=0&&o<=1?o:-1}},function(t,e){function n(){}t.exports=n,n.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var n=0,r=e.length;n!==r;++n)t.push(e[n])},n.splice=function(t,e,n){n=n||1;for(var r=e,i=t.length-n;r<i;r++)t[r]=t[r+n];t.length=i},"undefined"!=typeof P2_ARRAY_TYPE?n.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?n.ARRAY_TYPE=Float32Array:n.ARRAY_TYPE=Array,n.extend=function(t,e){for(var n in e)t[n]=e[n]},n.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t}},function(t,e,n){t.exports=o;var r=n(0),i=n(1);n(4);function o(t,e,n,r){this.minForce=void 0===n?-Number.MAX_VALUE:n,this.maxForce=void 0===r?Number.MAX_VALUE:r,this.bodyA=t,this.bodyB=e,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new i.ARRAY_TYPE(6);for(var a=0;a<6;a++)this.G[a]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}o.prototype.constructor=o,o.DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var t=this.stiffness,e=this.relaxation,n=this.timeStep;this.a=4/(n*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(n*n*t*(1+4*e)),this.needsUpdate=!1},o.prototype.gmult=function(t,e,n,r,i){return t[0]*e[0]+t[1]*e[1]+t[2]*n+t[3]*r[0]+t[4]*r[1]+t[5]*i},o.prototype.computeB=function(t,e,n){var r=this.computeGW();return-this.computeGq()*t-r*e-this.computeGiMf()*n};var a=r.create(),s=r.create();o.prototype.computeGq=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=(e.position,n.position,e.angle),i=n.angle;return this.gmult(t,a,r,s,i)+this.offset},o.prototype.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,o=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,r,o,i,a)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.vlambda,i=n.vlambda,o=e.wlambda,a=n.wlambda;return this.gmult(t,r,o,i,a)};var u=r.create(),c=r.create();o.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,n=t.force,i=t.angularForce,o=e.force,a=e.angularForce,s=t.invMassSolve,l=e.invMassSolve,h=t.invInertiaSolve,p=e.invInertiaSolve,f=this.G;return r.scale(u,n,s),r.multiply(u,t.massMultiplier,u),r.scale(c,o,l),r.multiply(c,e.massMultiplier,c),this.gmult(f,u,i*h,c,a*p)},o.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,n=t.invMassSolve,r=e.invMassSolve,i=t.invInertiaSolve,o=e.invInertiaSolve,a=this.G;return a[0]*a[0]*n*t.massMultiplier[0]+a[1]*a[1]*n*t.massMultiplier[1]+a[2]*a[2]*i+a[3]*a[3]*r*e.massMultiplier[0]+a[4]*a[4]*r*e.massMultiplier[1]+a[5]*a[5]*o};var l=r.create(),h=r.create(),p=r.create();r.create(),r.create(),r.create();o.prototype.addToWlambda=function(t){var e=this.bodyA,n=this.bodyB,i=l,o=h,a=p,s=e.invMassSolve,u=n.invMassSolve,c=e.invInertiaSolve,f=n.invInertiaSolve,d=this.G;o[0]=d[0],o[1]=d[1],a[0]=d[3],a[1]=d[4],r.scale(i,o,s*t),r.multiply(i,i,e.massMultiplier),r.add(e.vlambda,e.vlambda,i),e.wlambda+=c*d[2]*t,r.scale(i,a,u*t),r.multiply(i,i,n.massMultiplier),r.add(n.vlambda,n.vlambda,i),n.wlambda+=f*d[5]*t},o.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},function(t,e,n){t.exports=i;var r=n(0);function i(t){t=t||{},this.body=null,this.position=r.fromValues(0,0),t.position&&r.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=i.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}i.idCounter=0,i.CIRCLE=1,i.PARTICLE=2,i.PLANE=4,i.CONVEX=8,i.LINE=16,i.BOX=32,Object.defineProperty(i,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),i.BOX}}),i.CAPSULE=64,i.HEIGHTFIELD=128,i.prototype.computeMomentOfInertia=function(t){},i.prototype.updateBoundingRadius=function(){},i.prototype.updateArea=function(){},i.prototype.computeAABB=function(t,e,n){},i.prototype.raycast=function(t,e,n,r){}},function(t,e,n){var r=n(0),i=n(22),o=n(7),a=n(15),s=n(10),u=n(9),c=n(11);function l(t){t=t||{},c.call(this),this.id=t.id||++l._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=r.create(),this.position=r.fromValues(0,0),t.position&&r.copy(this.position,t.position),this.interpolatedPosition=r.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=r.fromValues(0,0),this.previousAngle=0,this.velocity=r.fromValues(0,0),t.velocity&&r.copy(this.velocity,t.velocity),this.vlambda=r.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=r.create(),t.force&&r.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=l.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=l.DYNAMIC:this.type=l.STATIC,this.boundingRadius=0,this.aabb=new u,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=l.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}t.exports=l,l.prototype=new c,l.prototype.constructor=l,l._idCounter=0,l.prototype.updateSolveMassProperties=function(){this.sleepState===l.SLEEPING||this.type===l.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},l.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},l.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},l.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var h=new u,p=r.create();l.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,n=p,i=this.angle,o=0;o!==e;o++){var a=t[o],s=a.angle+i;r.rotate(n,a.position,i),r.add(n,n,this.position),a.computeAABB(h,n,s),0===o?this.aabb.copy(h):this.aabb.extend(h)}this.aabbNeedsUpdate=!1},l.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,n=0,i=0;i!==e;i++){var o=t[i],a=r.length(o.position),s=o.boundingRadius;a+s>n&&(n=a+s)}this.boundingRadius=n},l.prototype.addShape=function(t,e,n){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?r.copy(t.position,e):r.set(t.position,0,0),t.angle=n||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},l.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},l.prototype.updateMassProperties=function(){if(this.type===l.STATIC||this.type===l.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,n=this.mass/e,i=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var o=0;o<e;o++){var a=t[o],s=r.squaredLength(a.position);i+=a.computeMomentOfInertia(n)+n*s}this.inertia=i,this.invInertia=i>0?1/i:0}this.invMass=1/this.mass,r.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};r.create();l.prototype.applyForce=function(t,e){if(r.add(this.force,this.force,t),e){var n=r.crossLength(e,t);this.angularForce+=n}};var f=r.create(),d=r.create(),v=r.create();l.prototype.applyForceLocal=function(t,e){e=e||v;var n=f,r=d;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyForce(n,r)};var y=r.create();l.prototype.applyImpulse=function(t,e){if(this.type===l.DYNAMIC){var n=y;if(r.scale(n,t,this.invMass),r.multiply(n,this.massMultiplier,n),r.add(this.velocity,n,this.velocity),e){var i=r.crossLength(e,t);i*=this.invInertia,this.angularVelocity+=i}}};var g=r.create(),m=r.create(),b=r.create();l.prototype.applyImpulseLocal=function(t,e){e=e||b;var n=g,r=m;this.vectorToWorldFrame(n,t),this.vectorToWorldFrame(r,e),this.applyImpulse(n,r)},l.prototype.toLocalFrame=function(t,e){r.toLocalFrame(t,e,this.position,this.angle)},l.prototype.toWorldFrame=function(t,e){r.toGlobalFrame(t,e,this.position,this.angle)},l.prototype.vectorToLocalFrame=function(t,e){r.vectorToLocalFrame(t,e,this.angle)},l.prototype.vectorToWorldFrame=function(t,e){r.vectorToGlobalFrame(t,e,this.angle)},l.prototype.fromPolygon=function(t,e){e=e||{};for(var n=this.shapes.length;n>=0;--n)this.removeShape(this.shapes[n]);var a,s=new i.Polygon;if(s.vertices=t,s.makeCCW(),"number"==typeof e.removeCollinearPoints&&s.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!s.isSimple())return!1;this.concavePath=s.vertices.slice(0);for(n=0;n<this.concavePath.length;n++){var u=[0,0];r.copy(u,this.concavePath[n]),this.concavePath[n]=u}a=e.optimalDecomp?s.decomp():s.quickDecomp();var c=r.create();for(n=0;n!==a.length;n++){for(var l=new o({vertices:a[n].vertices}),h=0;h!==l.vertices.length;h++){u=l.vertices[h];r.sub(u,u,l.centerOfMass)}r.scale(c,l.centerOfMass,1),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),this.addShape(l,c)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};r.fromValues(0,0);var A=r.fromValues(0,0),_=r.fromValues(0,0),w=r.fromValues(0,0);l.prototype.adjustCenterOfMass=function(){var t=A,e=_,n=w,i=0;r.set(e,0,0);for(var o=0;o!==this.shapes.length;o++){var a=this.shapes[o];r.scale(t,a.position,a.area),r.add(e,e,t),i+=a.area}r.scale(n,e,1/i);for(o=0;o!==this.shapes.length;o++){a=this.shapes[o];r.sub(a.position,a.position,n)}r.add(this.position,this.position,n);for(o=0;this.concavePath&&o<this.concavePath.length;o++)r.sub(this.concavePath[o],this.concavePath[o],n);this.updateMassProperties(),this.updateBoundingRadius()},l.prototype.setZeroForce=function(){r.set(this.force,0,0),this.angularForce=0},l.prototype.resetConstraintVelocity=function(){var t=this.vlambda;r.set(t,0,0),this.wlambda=0},l.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;r.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},l.prototype.applyDamping=function(t){if(this.type===l.DYNAMIC){var e=this.velocity;r.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},l.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=l.AWAKE,this.idleTime=0,t!==l.AWAKE&&this.emit(l.wakeUpEvent)},l.prototype.sleep=function(){this.sleepState=l.SLEEPING,this.angularVelocity=0,this.angularForce=0,r.set(this.velocity,0,0),r.set(this.force,0,0),this.emit(l.sleepEvent)},l.prototype.sleepTick=function(t,e,n){if(this.allowSleep&&this.type!==l.SLEEPING){this.wantsToSleep=!1;this.sleepState;r.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=l.AWAKE):(this.idleTime+=n,this.sleepState=l.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},l.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var E=r.create(),B=r.create();l.prototype.integrate=function(t){var e=this.invMass,n=this.force,i=this.position,o=this.velocity;r.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),r.scale(E,n,t*e),r.multiply(E,this.massMultiplier,E),r.add(o,E,o),this.integrateToTimeOfImpact(t)||(r.scale(B,o,t),r.add(i,i,B),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var x=new a,P=new s({mode:s.ALL}),S=r.create(),L=r.create(),q=r.create(),M=r.create();l.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||r.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;r.normalize(S,this.velocity),r.scale(L,this.velocity,t),r.add(L,L,this.position),r.sub(q,L,this.position);var e,n=this.angularVelocity*t,i=r.length(q),o=1,a=this;if(x.reset(),P.callback=function(t){t.body!==a&&(e=t.body,t.getHitPoint(L,P),r.sub(q,L,a.position),o=r.length(q)/i,t.stop())},r.copy(P.from,this.position),r.copy(P.to,L),P.update(),this.world.raycast(x,P),!e)return!1;var s=this.angle;r.copy(M,this.position);for(var u=0,c=0,l=0,h=o;h>=c&&u<this.ccdIterations;){u++,l=(h-c)/2,r.scale(B,q,o),r.add(this.position,M,B),this.angle=s+n*o,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?c=l:h=l}return o=l,r.copy(this.position,M),this.angle=s,r.scale(B,q,o),r.add(this.position,this.position,B),this.fixedRotation||(this.angle+=n*o),!0},l.prototype.getVelocityAtPoint=function(t,e){return r.crossVZ(t,e,this.angularVelocity),r.subtract(t,this.velocity,t),t},l.sleepyEvent={type:"sleepy"},l.sleepEvent={type:"sleep"},l.wakeUpEvent={type:"wakeup"},l.DYNAMIC=1,l.STATIC=2,l.KINEMATIC=4,l.AWAKE=0,l.SLEEPY=1,l.SLEEPING=2},function(t,e,n){t.exports=i;var r=n(1);function i(t,e,n,i){this.type=n,i=r.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}i.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},i.DISTANCE=1,i.GEAR=2,i.LOCK=3,i.PRISMATIC=4,i.REVOLUTE=5,i.prototype.setStiffness=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.stiffness=t,r.needsUpdate=!0}},i.prototype.setRelaxation=function(t){for(var e=this.equations,n=0;n!==e.length;n++){var r=e[n];r.relaxation=t,r.needsUpdate=!0}}},function(t,e){function n(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}t.exports=n,n.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},n.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},n.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},function(t,e,n){var r=n(3),i=n(0),o=n(60);n(22);function a(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],n=0;n<e.length;n++){var o=i.create();i.copy(o,e[n]),this.vertices.push(o)}if(this.axes=[],t.axes)for(n=0;n<t.axes.length;n++){var a=i.create();i.copy(a,t.axes[n]),this.axes.push(a)}else for(n=0;n<this.vertices.length;n++){var s=this.vertices[n],u=this.vertices[(n+1)%this.vertices.length],c=i.create();i.sub(c,u,s),i.rotate90cw(c,c),i.normalize(c,c),this.axes.push(c)}if(this.centerOfMass=i.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=r.CONVEX,r.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}t.exports=a,a.prototype=new r,a.prototype.constructor=a;var s=i.create(),u=i.create();a.prototype.projectOntoLocalAxis=function(t,e){for(var n,r,o=null,a=null,u=(t=s,0);u<this.vertices.length;u++)n=this.vertices[u],r=i.dot(n,t),(null===o||r>o)&&(o=r),(null===a||r<a)&&(a=r);if(a>o){var c=a;a=o,o=c}i.set(e,a,o)},a.prototype.projectOntoWorldAxis=function(t,e,n,r){var o=u;this.projectOntoLocalAxis(t,r),0!==n?i.rotate(o,t,n):o=t;var a=i.dot(e,o);i.set(r,r[0]+a,r[1]+a)},a.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var n=this.vertices[e];t.push(n[0],n[1])}var r=o.Triangulate(t);for(e=0;e<r.length;e+=3){var i=r[e],a=r[e+1],s=r[e+2];this.triangles.push([i,a,s])}};var c=i.create(),l=i.create(),h=i.create(),p=i.create(),f=i.create();i.create(),i.create(),i.create(),i.create();a.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,n=this.centerOfMass,r=c,o=h,s=p,u=f,d=l;i.set(n,0,0);for(var v=0,y=0;y!==t.length;y++){var g=t[y];o=e[g[0]],s=e[g[1]],u=e[g[2]];i.centroid(r,o,s,u);var m=a.triangleArea(o,s,u);v+=m,i.scale(d,r,m),i.add(n,n,d)}i.scale(n,n,1/v)},a.prototype.computeMomentOfInertia=function(t){for(var e=0,n=0,r=this.vertices.length,o=r-1,a=0;a<r;o=a,a++){var s=this.vertices[o],u=this.vertices[a],c=Math.abs(i.crossLength(s,u));e+=c*(i.dot(u,u)+i.dot(u,s)+i.dot(s,s)),n+=c}return t/6*(e/n)},a.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,n=0;n!==t.length;n++){var r=i.squaredLength(t[n]);r>e&&(e=r)}this.boundingRadius=Math.sqrt(e)},a.triangleArea=function(t,e,n){return.5*((e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1]))},a.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,n=0;n!==t.length;n++){var r=t[n],i=e[r[0]],o=e[r[1]],s=e[r[2]],u=a.triangleArea(i,o,s);this.area+=u}},a.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)};var d=i.create(),v=i.create(),y=i.create();a.prototype.raycast=function(t,e,n,r){var o=d,a=v,s=y,u=this.vertices;i.toLocalFrame(o,e.from,n,r),i.toLocalFrame(a,e.to,n,r);for(var c=u.length,l=0;l<c&&!t.shouldStop(e);l++){var h=u[l],p=u[(l+1)%c],f=i.getLineSegmentsIntersectionFraction(o,a,h,p);f>=0&&(i.sub(s,p,h),i.rotate(s,s,-Math.PI/2+r),i.normalize(s,s),e.reportIntersection(t,f,s,l))}}},function(t,e,n){var r=n(0),i=n(2);n(1);function o(t,e,n){i.call(this,t,e,-n,n),this.contactPointA=r.create(),this.contactPointB=r.create(),this.t=r.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},o.prototype.getSlipForce=function(){return this.maxForce},o.prototype.computeB=function(t,e,n){this.bodyA,this.bodyB;var i=this.contactPointA,o=this.contactPointB,a=this.t,s=this.G;return s[0]=-a[0],s[1]=-a[1],s[2]=-r.crossLength(i,a),s[3]=a[0],s[4]=a[1],s[5]=r.crossLength(o,a),-this.computeGW()*e-n*this.computeGiMf()}},function(t,e,n){var r=n(0);n(1);function i(t){this.lowerBound=r.create(),t&&t.lowerBound&&r.copy(this.lowerBound,t.lowerBound),this.upperBound=r.create(),t&&t.upperBound&&r.copy(this.upperBound,t.upperBound)}t.exports=i;var o=r.create();i.prototype.setFromPoints=function(t,e,n,i){var a=this.lowerBound,s=this.upperBound;"number"!=typeof n&&(n=0),0!==n?r.rotate(a,t[0],n):r.copy(a,t[0]),r.copy(s,a);for(var u=Math.cos(n),c=Math.sin(n),l=1;l<t.length;l++){var h=t[l];if(0!==n){var p=h[0],f=h[1];o[0]=u*p-c*f,o[1]=c*p+u*f,h=o}for(var d=0;d<2;d++)h[d]>s[d]&&(s[d]=h[d]),h[d]<a[d]&&(a[d]=h[d])}e&&(r.add(this.lowerBound,this.lowerBound,e),r.add(this.upperBound,this.upperBound,e)),i&&(this.lowerBound[0]-=i,this.lowerBound[1]-=i,this.upperBound[0]+=i,this.upperBound[1]+=i)},i.prototype.copy=function(t){r.copy(this.lowerBound,t.lowerBound),r.copy(this.upperBound,t.upperBound)},i.prototype.extend=function(t){for(var e=2;e--;){var n=t.lowerBound[e];this.lowerBound[e]>n&&(this.lowerBound[e]=n);var r=t.upperBound[e];this.upperBound[e]<r&&(this.upperBound[e]=r)}},i.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return(r[0]<=n[0]&&n[0]<=i[0]||e[0]<=i[0]&&i[0]<=n[0])&&(r[1]<=n[1]&&n[1]<=i[1]||e[1]<=i[1]&&i[1]<=n[1])},i.prototype.containsPoint=function(t){var e=this.lowerBound,n=this.upperBound;return e[0]<=t[0]&&t[0]<=n[0]&&e[1]<=t[1]&&t[1]<=n[1]},i.prototype.overlapsRay=function(t){var e=1/t.direction[0],n=1/t.direction[1],r=(this.lowerBound[0]-t.from[0])*e,i=(this.upperBound[0]-t.from[0])*e,o=(this.lowerBound[1]-t.from[1])*n,a=(this.upperBound[1]-t.from[1])*n,s=Math.max(Math.max(Math.min(r,i),Math.min(o,a))),u=Math.min(Math.min(Math.max(r,i),Math.max(o,a)));return u<0?-1:s>u?-1:s}},function(t,e,n){t.exports=i;var r=n(0);n(15),n(3),n(9);function i(t){t=t||{},this.from=t.from?r.fromValues(t.from[0],t.from[1]):r.create(),this.to=t.to?r.fromValues(t.to[0],t.to[1]):r.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:i.ANY,this.callback=t.callback||function(t){},this.direction=r.create(),this.length=1,this.update()}i.prototype.constructor=i,i.CLOSEST=1,i.ANY=2,i.ALL=4,i.prototype.update=function(){var t=this.direction;r.sub(t,this.to,this.from),this.length=r.length(t),r.normalize(t,t)},i.prototype.intersectBodies=function(t,e){for(var n=0,r=e.length;!t.shouldStop(this)&&n<r;n++){var i=e[n],o=i.getAABB();(o.overlapsRay(this)>=0||o.containsPoint(this.from))&&this.intersectBody(t,i)}};var o=r.create();i.prototype.intersectBody=function(t,e){var n=this.checkCollisionResponse;if(!n||e.collisionResponse)for(var i=o,a=0,s=e.shapes.length;a<s;a++){var u=e.shapes[a];if((!n||u.collisionResponse)&&(0!=(this.collisionGroup&u.collisionMask)&&0!=(u.collisionGroup&this.collisionMask))){r.rotate(i,u.position,e.angle),r.add(i,i,e.position);var c=u.angle+e.angle;if(this.intersectShape(t,u,c,i,e),t.shouldStop(this))break}}},i.prototype.intersectShape=function(t,e,n,i,o){(function(t,e,n){r.sub(a,n,t);var i=r.dot(a,e);return r.scale(s,e,i),r.add(s,s,t),r.squaredDistance(n,s)})(this.from,this.direction,i)>e.boundingRadius*e.boundingRadius||(this._currentBody=o,this._currentShape=e,e.raycast(t,this,i,n),this._currentBody=this._currentShape=null)},i.prototype.getAABB=function(t){var e=this.to,n=this.from;r.set(t.lowerBound,Math.min(e[0],n[0]),Math.min(e[1],n[1])),r.set(t.upperBound,Math.max(e[0],n[0]),Math.max(e[1],n[1]))};r.create();i.prototype.reportIntersection=function(t,e,n,o){this.from,this.to;var a=this._currentShape,s=this._currentBody;if(!(this.skipBackfaces&&r.dot(n,this.direction)>0))switch(this.mode){case i.ALL:t.set(n,a,s,e,o),this.callback(t);break;case i.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(n,a,s,e,o);break;case i.ANY:t.set(n,a,s,e,o)}};var a=r.create(),s=r.create()},function(t,e){var n=function(){};t.exports=n,n.prototype={constructor:n,on:function(t,e,n){e.context=n||this,void 0===this._listeners&&(this._listeners={});var r=this._listeners;return void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;if(e){if(void 0!==n[t]&&-1!==n[t].indexOf(e))return!0}else if(void 0!==n[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners,r=n[t].indexOf(e);return-1!==r&&n[t].splice(r,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i.call(i.context,t)}}return this}}},function(t,e,n){var r=n(0),i=n(4);function o(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=o.AABB}t.exports=o,o.AABB=1,o.BOUNDING_CIRCLE=2,o.prototype.setWorld=function(t){this.world=t},o.prototype.getCollisionPairs=function(t){};var a=r.create();o.boundingRadiusCheck=function(t,e){r.sub(a,t.position,e.position);var n=r.squaredLength(a),i=t.boundingRadius+e.boundingRadius;return n<=i*i},o.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},o.prototype.boundingVolumeCheck=function(t,e){var n;switch(this.boundingVolumeType){case o.BOUNDING_CIRCLE:n=o.boundingRadiusCheck(t,e);break;case o.AABB:n=o.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return n},o.canCollide=function(t,e){var n=i.KINEMATIC,r=i.STATIC;return(t.type!==r||e.type!==r)&&(!(t.type===n&&e.type===r||t.type===r&&e.type===n)&&((t.type!==n||e.type!==n)&&((t.sleepState!==i.SLEEPING||e.sleepState!==i.SLEEPING)&&!(t.sleepState===i.SLEEPING&&e.type===r||e.sleepState===i.SLEEPING&&t.type===r))))},o.NAIVE=1,o.SAP=2},function(t,e,n){var r=n(3),i=n(0);function o(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=r.CIRCLE,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},o.prototype.computeAABB=function(t,e,n){var r=this.radius;i.set(t.upperBound,r,r),i.set(t.lowerBound,-r,-r),e&&(i.add(t.lowerBound,t.lowerBound,e),i.add(t.upperBound,t.upperBound,e))};var a=i.create(),s=i.create();o.prototype.raycast=function(t,e,n,r){var o=e.from,u=e.to,c=this.radius,l=Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2),h=2*((u[0]-o[0])*(o[0]-n[0])+(u[1]-o[1])*(o[1]-n[1])),p=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2)-Math.pow(c,2),f=Math.pow(h,2)-4*l*p,d=a,v=s;if(!(f<0))if(0===f)i.lerp(d,o,u,f),i.sub(v,d,n),i.normalize(v,v),e.reportIntersection(t,f,v,-1);else{var y=Math.sqrt(f),g=1/(2*l),m=(-h-y)*g,b=(-h+y)*g;if(m>=0&&m<=1&&(i.lerp(d,o,u,m),i.sub(v,d,n),i.normalize(v,v),e.reportIntersection(t,m,v,-1),t.shouldStop(e)))return;b>=0&&b<=1&&(i.lerp(d,o,u,b),i.sub(v,d,n),i.normalize(v,v),e.reportIntersection(t,b,v,-1))}}},function(t,e,n){var r=n(2),i=n(0);function o(t,e){r.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=i.create(),this.penetrationVec=i.create(),this.contactPointB=i.create(),this.normalA=i.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeB=function(t,e,n){var r,o,a=this.bodyA,s=this.bodyB,u=this.contactPointA,c=this.contactPointB,l=a.position,h=s.position,p=this.penetrationVec,f=this.normalA,d=this.G,v=i.crossLength(u,f),y=i.crossLength(c,f);return d[0]=-f[0],d[1]=-f[1],d[2]=-v,d[3]=f[0],d[4]=f[1],d[5]=y,i.add(p,h,c),i.sub(p,p,l),i.sub(p,p,u),this.firstImpact&&0!==this.restitution?(o=0,r=1/e*(1+this.restitution)*this.computeGW()):(o=i.dot(f,p)+this.offset,r=this.computeGW()),-o*t-r*e-n*this.computeGiMf()};var a=i.create(),s=i.create(),u=i.create();o.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(a,this.contactPointA),this.bodyB.getVelocityAtPoint(s,this.contactPointB),i.subtract(u,a,s),i.dot(this.normalA,u)}},function(t,e,n){var r=n(0),i=n(10);function o(){this.normal=r.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}t.exports=o,o.prototype.reset=function(){r.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},o.prototype.getHitDistance=function(t){return r.distance(t.from,t.to)*this.fraction},o.prototype.hasHit=function(){return-1!==this.fraction},o.prototype.getHitPoint=function(t,e){r.lerp(t,e.from,e.to,this.fraction)},o.prototype.stop=function(){this.isStopped=!0},o.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===i.ANY},o.prototype.set=function(t,e,n,i,o){r.copy(this.normal,t),this.shape=e,this.body=n,this.fraction=i,this.faceIndex=o}},function(t,e){function n(t){this.id=t||n.idCounter++}t.exports=n,n.idCounter=0},function(t,e,n){n(1);var r=n(11);function i(t,e){t=t||{},r.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};i.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),o.bodies.length=0,e.getBodies(o.bodies),o.bodies.length&&this.solve(t,o))},i.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},i.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},i.prototype.addEquations=function(t){for(var e=0,n=t.length;e!==n;e++){var r=t[e];r.enabled&&this.equations.push(r)}},i.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},i.prototype.removeAllEquations=function(){this.equations.length=0},i.GS=1,i.ISLAND=2},function(t,e,n){var r=n(3),i=n(0);n(1);function o(t){(t=t||{}).type=r.PLANE,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.computeAABB=function(t,e,n){var r=n%(2*Math.PI),o=i.set,a=t.lowerBound,s=t.upperBound;o(a,-1e7,-1e7),o(s,1e7,1e7),0===r?s[1]=0:r===Math.PI/2?a[0]=0:r===Math.PI?a[1]=0:r===3*Math.PI/2&&(s[0]=0)},o.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var a=i.create(),s=(i.create(),i.create(),i.create()),u=i.create();o.prototype.raycast=function(t,e,n,r){var o=e.from,c=e.to,l=e.direction,h=a,p=s,f=u;i.set(p,0,1),i.rotate(p,p,r),i.sub(f,o,n);var d=i.dot(f,p);if(i.sub(f,c,n),!(d*i.dot(f,p)>0||i.squaredDistance(o,c)<d*d)){var v=i.dot(p,l);i.sub(h,o,n);var y=-i.dot(p,h)/v/e.length;e.reportIntersection(t,y,p,-1)}}},function(t,e,n){var r=n(3),i=n(0);function o(t){(t=t||{}).type=r.PARTICLE,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(t,e,n){i.copy(t.lowerBound,e),i.copy(t.upperBound,e)}},function(t,e,n){n(0);var r=n(1);function i(t,e,n){n=r.defaults(n,{stiffness:100,damping:1}),this.stiffness=n.stiffness,this.damping=n.damping,this.bodyA=t,this.bodyB=e}t.exports=i,i.prototype.applyForce=function(){}},function(t,e,n){var r=n(2);n(0);function i(t,e,n){n=n||{},r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0,this.ratio="number"==typeof n.ratio?n.ratio:1,this.setRatio(this.ratio)}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},i.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},i.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},function(t,e,n){t.exports={Polygon:n(58),Point:n(24)}},function(t,e){function n(){}t.exports=n,n.eq=function(t,e,n){return n=n||0,Math.abs(t-e)<n}},function(t,e){function n(){}t.exports=n,n.area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},n.left=function(t,e,r){return n.area(t,e,r)>0},n.leftOn=function(t,e,r){return n.area(t,e,r)>=0},n.right=function(t,e,r){return n.area(t,e,r)<0},n.rightOn=function(t,e,r){return n.area(t,e,r)<=0};var r=[],i=[];n.collinear=function(t,e,o,a){if(a){var s=r,u=i;s[0]=e[0]-t[0],s[1]=e[1]-t[1],u[0]=o[0]-e[0],u[1]=o[1]-e[1];var c=s[0]*u[0]+s[1]*u[1],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),h=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return Math.acos(c/(l*h))<a}return 0==n.area(t,e,o)},n.sqdist=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e,n){var r=n(3),i=n(0);function o(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=r.CAPSULE,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){var e=this.radius,n=this.length+e,r=2*e;return t*(r*r+n*n)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var a=i.create();o.prototype.computeAABB=function(t,e,n){var r=this.radius;i.set(a,this.length/2,0),0!==n&&i.rotate(a,a,n),i.set(t.upperBound,Math.max(a[0]+r,-a[0]+r),Math.max(a[1]+r,-a[1]+r)),i.set(t.lowerBound,Math.min(a[0]-r,-a[0]-r),Math.min(a[1]-r,-a[1]-r)),i.add(t.lowerBound,t.lowerBound,e),i.add(t.upperBound,t.upperBound,e)};var s=i.create(),u=i.create(),c=i.create(),l=i.create(),h=i.fromValues(0,1);o.prototype.raycast=function(t,e,n,r){for(var o=e.from,a=e.to,p=(e.direction,s),f=u,d=c,v=l,y=this.length/2,g=0;g<2;g++){var m=this.radius*(2*g-1);if(i.set(d,-y,m),i.set(v,y,m),i.toGlobalFrame(d,d,n,r),i.toGlobalFrame(v,v,n,r),(A=i.getLineSegmentsIntersectionFraction(o,a,d,v))>=0&&(i.rotate(f,h,r),i.scale(f,f,2*g-1),e.reportIntersection(t,A,f,-1),t.shouldStop(e)))return}var b=Math.pow(this.radius,2)+Math.pow(y,2);for(g=0;g<2;g++){i.set(d,y*(2*g-1),0),i.toGlobalFrame(d,d,n,r);var A,_=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),w=2*((a[0]-o[0])*(o[0]-d[0])+(a[1]-o[1])*(o[1]-d[1])),E=Math.pow(o[0]-d[0],2)+Math.pow(o[1]-d[1],2)-Math.pow(this.radius,2);if(!((A=Math.pow(w,2)-4*_*E)<0))if(0===A){if(i.lerp(p,o,a,A),i.squaredDistance(p,n)>b&&(i.sub(f,p,d),i.normalize(f,f),e.reportIntersection(t,A,f,-1),t.shouldStop(e)))return}else{var B=Math.sqrt(A),x=1/(2*_),P=(-w-B)*x,S=(-w+B)*x;if(P>=0&&P<=1&&(i.lerp(p,o,a,P),i.squaredDistance(p,n)>b&&(i.sub(f,p,d),i.normalize(f,f),e.reportIntersection(t,P,f,-1),t.shouldStop(e))))return;if(S>=0&&S<=1&&(i.lerp(p,o,a,S),i.squaredDistance(p,n)>b&&(i.sub(f,p,d),i.normalize(f,f),e.reportIntersection(t,S,f,-1),t.shouldStop(e))))return}}}},function(t,e,n){var r=n(14),i=n(6);function o(){i.apply(this,arguments)}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,n){var r=n(16),i=n(2);function o(t,e,n){if(n=n||{},!(t instanceof r&&e instanceof r))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==n.friction?Number(n.friction):.3,this.restitution=void 0!==n.restitution?Number(n.restitution):0,this.stiffness=void 0!==n.stiffness?Number(n.stiffness):i.DEFAULT_STIFFNESS,this.relaxation=void 0!==n.relaxation?Number(n.relaxation):i.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==n.frictionStiffness?Number(n.frictionStiffness):i.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==n.frictionRelaxation?Number(n.frictionRelaxation):i.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==n.surfaceVelocity?Number(n.surfaceVelocity):0,this.contactSkinSize=.005}t.exports=o,o.idCounter=0},function(t,e,n){var r=n(5),i=n(2),o=n(0),a=n(1);function s(t,e,n){n=a.defaults(n,{localAnchorA:[0,0],localAnchorB:[0,0]}),r.call(this,t,e,r.DISTANCE,n),this.localAnchorA=o.fromValues(n.localAnchorA[0],n.localAnchorA[1]),this.localAnchorB=o.fromValues(n.localAnchorB[0],n.localAnchorB[1]);var s,u=this.localAnchorA,c=this.localAnchorB;if(this.distance=0,"number"==typeof n.distance)this.distance=n.distance;else{var l=o.create(),h=o.create(),p=o.create();o.rotate(l,u,t.angle),o.rotate(h,c,e.angle),o.add(p,e.position,h),o.sub(p,p,l),o.sub(p,p,t.position),this.distance=o.length(p)}s=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce;var f=new i(t,e,-s,s);this.equations=[f],this.maxForce=s;p=o.create();var d=o.create(),v=o.create(),y=this;f.computeGq=function(){var t=this.bodyA,e=this.bodyB,n=t.position,r=e.position;return o.rotate(d,u,t.angle),o.rotate(v,c,e.angle),o.add(p,r,v),o.sub(p,p,d),o.sub(p,p,n),o.length(p)-y.distance},this.setMaxForce(s),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}t.exports=s,s.prototype=new r,s.prototype.constructor=s;var u=o.create(),c=o.create(),l=o.create();s.prototype.update=function(){var t=this.equations[0],e=this.bodyA,n=this.bodyB,r=(this.distance,e.position),i=n.position,a=this.equations[0],s=t.G;o.rotate(c,this.localAnchorA,e.angle),o.rotate(l,this.localAnchorB,n.angle),o.add(u,i,l),o.sub(u,u,c),o.sub(u,u,r),this.position=o.length(u);var h=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(a.maxForce=0,a.minForce=-this.maxForce,this.distance=this.upperLimit,h=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(a.maxForce=this.maxForce,a.minForce=0,this.distance=this.lowerLimit,h=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||h){a.enabled=!0,o.normalize(u,u);var p=o.crossLength(c,u),f=o.crossLength(l,u);s[0]=-u[0],s[1]=-u[1],s[2]=-p,s[3]=u[0],s[4]=u[1],s[5]=f}else a.enabled=!1},s.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},s.prototype.getMaxForce=function(){return this.equations[0].maxForce}},function(t,e,n){var r=n(8),i=n(6);function o(){i.apply(this,arguments)}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,n){var r=n(5),i=(n(2),n(21));n(0);function o(t,e,n){n=n||{},r.call(this,t,e,r.GEAR,n),this.ratio=void 0!==n.ratio?n.ratio:1,this.angle=void 0!==n.angle?n.angle:e.angle-this.ratio*t.angle,n.angle=this.angle,n.ratio=this.ratio,this.equations=[new i(t,e,n)],void 0!==n.maxTorque&&this.setMaxTorque(n.maxTorque)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},o.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},o.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},function(t,e,n){var r=n(0),i=n(17),o=n(1),a=n(8);function s(t){i.call(this,t,i.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new o.ARRAY_TYPE(this.arrayStep),this.Bs=new o.ARRAY_TYPE(this.arrayStep),this.invCs=new o.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}t.exports=s,s.prototype=new i,s.prototype.constructor=s,s.prototype.solve=function(t,e){this.sortEquations();var n=0,i=this.iterations,u=this.frictionIterations,c=this.equations,l=c.length,h=Math.pow(this.tolerance*l,2),p=e.bodies,f=e.bodies.length,d=(r.add,r.set,this.useZeroRHS),v=this.lambda;if(this.usedIterations=0,l)for(var y=0;y!==f;y++){p[y].updateSolveMassProperties()}v.length<l&&(v=this.lambda=new o.ARRAY_TYPE(l+this.arrayStep),this.Bs=new o.ARRAY_TYPE(l+this.arrayStep),this.invCs=new o.ARRAY_TYPE(l+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(v);var g,m,b=this.invCs,A=this.Bs;for(v=this.lambda,y=0;y!==c.length;y++){var _;((_=c[y]).timeStep!==t||_.needsUpdate)&&(_.timeStep=t,_.update()),A[y]=_.computeB(_.a,_.b,t),b[y]=_.computeInvC(_.epsilon)}if(0!==l){for(y=0;y!==f;y++){p[y].resetConstraintVelocity()}if(u){for(n=0;n!==u;n++){for(g=0,m=0;m!==l;m++){_=c[m];var w=s.iterateEquation(m,_,_.epsilon,A,b,v,d,t,n);g+=Math.abs(w)}if(this.usedIterations++,g*g<=h)break}for(s.updateMultipliers(c,v,1/t),m=0;m!==l;m++){var E=c[m];if(E instanceof a){for(var B=0,x=0;x!==E.contactEquations.length;x++)B+=E.contactEquations[x].multiplier;B*=E.frictionCoefficient/E.contactEquations.length,E.maxForce=B,E.minForce=-B}}}for(n=0;n!==i;n++){for(g=0,m=0;m!==l;m++){_=c[m];w=s.iterateEquation(m,_,_.epsilon,A,b,v,d,t,n);g+=Math.abs(w)}if(this.usedIterations++,g*g<=h)break}for(y=0;y!==f;y++)p[y].addConstraintVelocity();s.updateMultipliers(c,v,1/t)}},s.updateMultipliers=function(t,e,n){for(var r=t.length;r--;)t[r].multiplier=e[r]*n},s.iterateEquation=function(t,e,n,r,i,o,a,s,u){var c=r[t],l=i[t],h=o[t],p=e.computeGWlambda(),f=e.maxForce,d=e.minForce;a&&(c=0);var v=l*(c-p-n*h),y=h+v;return y<d*s?v=d*s-h:y>f*s&&(v=f*s-h),o[t]+=v,e.addToWlambda(v),v}},function(t,e,n){var r=n(3),i=n(0);function o(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=r.LINE,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var a=[i.create(),i.create()];o.prototype.computeAABB=function(t,e,n){var r=this.length/2;i.set(a[0],-r,0),i.set(a[1],r,0),t.setFromPoints(a,e,n,0)};i.create();var s=i.create(),u=i.create(),c=i.create(),l=i.fromValues(0,1);o.prototype.raycast=function(t,e,n,r){var o=e.from,a=e.to,h=u,p=c,f=this.length/2;i.set(h,-f,0),i.set(p,f,0),i.toGlobalFrame(h,h,n,r),i.toGlobalFrame(p,p,n,r);var d=i.getLineSegmentsIntersectionFraction(h,p,o,a);if(d>=0){var v=s;i.rotate(v,l,r),e.reportIntersection(t,d,v,-1)}}},function(t,e,n){var r=n(5),i=n(0),o=n(2);function a(t,e,n){n=n||{},r.call(this,t,e,r.LOCK,n);var a=void 0===n.maxForce?Number.MAX_VALUE:n.maxForce,s=(n.localAngleB,new o(t,e,-a,a)),u=new o(t,e,-a,a),c=new o(t,e,-a,a),l=i.create(),h=i.create(),p=this;s.computeGq=function(){return i.rotate(l,p.localOffsetB,t.angle),i.sub(h,e.position,t.position),i.sub(h,h,l),h[0]},u.computeGq=function(){return i.rotate(l,p.localOffsetB,t.angle),i.sub(h,e.position,t.position),i.sub(h,h,l),h[1]};var f=i.create(),d=i.create();c.computeGq=function(){return i.rotate(f,p.localOffsetB,e.angle-p.localAngleB),i.scale(f,f,-1),i.sub(h,t.position,e.position),i.add(h,h,f),i.rotate(d,f,-Math.PI/2),i.normalize(d,d),i.dot(h,d)},this.localOffsetB=i.create(),n.localOffsetB?i.copy(this.localOffsetB,n.localOffsetB):(i.sub(this.localOffsetB,e.position,t.position),i.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof n.localAngleB?this.localAngleB=n.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(s,u,c),this.setMaxForce(a)}t.exports=a,a.prototype=new r,a.prototype.constructor=a,a.prototype.setMaxForce=function(t){for(var e=this.equations,n=0;n<this.equations.length;n++)e[n].maxForce=t,e[n].minForce=-t},a.prototype.getMaxForce=function(){return this.equations[0].maxForce};var s=i.create(),u=i.create(),c=i.create(),l=i.fromValues(1,0),h=i.fromValues(0,1);a.prototype.update=function(){var t=this.equations[0],e=this.equations[1],n=this.equations[2],r=this.bodyA,o=this.bodyB;i.rotate(s,this.localOffsetB,r.angle),i.rotate(u,this.localOffsetB,o.angle-this.localAngleB),i.scale(u,u,-1),i.rotate(c,u,Math.PI/2),i.normalize(c,c),t.G[0]=-1,t.G[1]=0,t.G[2]=-i.crossLength(s,l),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-i.crossLength(s,h),e.G[4]=1,n.G[0]=-c[0],n.G[1]=-c[1],n.G[3]=c[0],n.G[4]=c[1],n.G[5]=i.crossLength(u,c)}},function(t,e,n){var r=n(0),i=r.sub,o=r.add,a=r.dot,s=(n(1),n(26)),u=n(29),c=n(35),l=n(2),h=(n(14),n(8),n(13)),p=n(7),f=n(3),d=(n(4),n(36));t.exports=O;var v=r.fromValues(0,1),y=r.fromValues(0,0),g=r.fromValues(0,0),m=r.fromValues(0,0),b=r.fromValues(0,0),A=r.fromValues(0,0),_=r.fromValues(0,0),w=r.fromValues(0,0),E=r.fromValues(0,0),B=r.fromValues(0,0),x=r.fromValues(0,0),P=r.fromValues(0,0),S=r.fromValues(0,0),L=r.fromValues(0,0),q=r.fromValues(0,0),M=r.fromValues(0,0),C=r.fromValues(0,0),F=r.fromValues(0,0),I=r.fromValues(0,0),R=[];function O(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new s({size:32}),this.frictionEquationPool=new u({size:64}),this.restitution=0,this.stiffness=l.DEFAULT_STIFFNESS,this.relaxation=l.DEFAULT_RELAXATION,this.frictionStiffness=l.DEFAULT_STIFFNESS,this.frictionRelaxation=l.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new c,this.contactSkinSize=.01}var V=r.create(),T=r.create();function N(t,e){r.set(t.vertices[0],.5*-e.length,-e.radius),r.set(t.vertices[1],.5*e.length,-e.radius),r.set(t.vertices[2],.5*e.length,e.radius),r.set(t.vertices[3],.5*-e.length,e.radius)}O.prototype.bodiesOverlap=function(t,e){for(var n=V,r=T,i=0,o=t.shapes.length;i!==o;i++){var a=t.shapes[i];t.toWorldFrame(n,a.position);for(var s=0,u=e.shapes.length;s!==u;s++){var c=e.shapes[s];if(e.toWorldFrame(r,c.position),this[a.type|c.type](t,a,n,a.angle+t.angle,e,c,r,c.angle+e.angle,!0))return!0}}return!1},O.prototype.collidedLastStep=function(t,e){var n=0|t.id,r=0|e.id;return!!this.collidingBodiesLastStep.get(n,r)},O.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var n=t[e],r=n.bodyA.id,i=n.bodyB.id;this.collidingBodiesLastStep.set(r,i,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},O.prototype.createContactEquation=function(t,e,n,r){var i=this.contactEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.restitution=this.restitution,i.firstImpact=!this.collidedLastStep(t,e),i.stiffness=this.stiffness,i.relaxation=this.relaxation,i.needsUpdate=!0,i.enabled=this.enabledEquations,i.offset=this.contactSkinSize,i},O.prototype.createFrictionEquation=function(t,e,n,r){var i=this.frictionEquationPool.get();return i.bodyA=t,i.bodyB=e,i.shapeA=n,i.shapeB=r,i.setSlipForce(this.slipForce),i.frictionCoefficient=this.frictionCoefficient,i.relativeVelocity=this.surfaceVelocity,i.enabled=this.enabledEquations,i.needsUpdate=!0,i.stiffness=this.frictionStiffness,i.relaxation=this.frictionRelaxation,i.contactEquations.length=0,i},O.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return r.copy(e.contactPointA,t.contactPointA),r.copy(e.contactPointB,t.contactPointB),r.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},O.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],n=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),i=e.bodyA;e.bodyB;r.set(n.contactPointA,0,0),r.set(n.contactPointB,0,0),r.set(n.t,0,0);for(var o=0;o!==t;o++)(e=this.contactEquations[this.contactEquations.length-1-o]).bodyA===i?(r.add(n.t,n.t,e.normalA),r.add(n.contactPointA,n.contactPointA,e.contactPointA),r.add(n.contactPointB,n.contactPointB,e.contactPointB)):(r.sub(n.t,n.t,e.normalA),r.add(n.contactPointA,n.contactPointA,e.contactPointB),r.add(n.contactPointB,n.contactPointB,e.contactPointA)),n.contactEquations.push(e);var a=1/t;return r.scale(n.contactPointA,n.contactPointA,a),r.scale(n.contactPointB,n.contactPointB,a),r.normalize(n.t,n.t),r.rotate90cw(n.t,n.t),n},O.prototype[f.LINE|f.CONVEX]=O.prototype.convexLine=function(t,e,n,r,i,o,a,s,u){return!u&&0},O.prototype[f.LINE|f.BOX]=O.prototype.lineBox=function(t,e,n,r,i,o,a,s,u){return!u&&0};var k=new d({width:1,height:1}),G=r.create();O.prototype[f.CAPSULE|f.CONVEX]=O.prototype[f.CAPSULE|f.BOX]=O.prototype.convexCapsule=function(t,e,n,i,o,a,s,u,c){var l=G;r.set(l,a.length/2,0),r.rotate(l,l,u),r.add(l,l,s);var h=this.circleConvex(o,a,l,u,t,e,n,i,c,a.radius);r.set(l,-a.length/2,0),r.rotate(l,l,u),r.add(l,l,s);var p=this.circleConvex(o,a,l,u,t,e,n,i,c,a.radius);if(c&&(h||p))return!0;var f=k;return N(f,a),this.convexConvex(t,e,n,i,o,f,s,u,c)+h+p},O.prototype[f.CAPSULE|f.LINE]=O.prototype.lineCapsule=function(t,e,n,r,i,o,a,s,u){return!u&&0};var j=r.create(),U=r.create(),z=new d({width:1,height:1});O.prototype[f.CAPSULE|f.CAPSULE]=O.prototype.capsuleCapsule=function(t,e,n,i,o,a,s,u,c){for(var l=j,h=U,p=0,f=0;f<2;f++){r.set(l,(0===f?-1:1)*e.length/2,0),r.rotate(l,l,i),r.add(l,l,n);for(var d=0;d<2;d++){r.set(h,(0===d?-1:1)*a.length/2,0),r.rotate(h,h,u),r.add(h,h,s),this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var v=this.circleCircle(t,e,l,i,o,a,h,u,c,e.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=m),c&&v)return!0;p+=v}}this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var y=z;N(y,e);var g=this.convexCapsule(t,y,n,i,o,a,s,u,c);if(this.enableFrictionReduction&&(this.enableFriction=m),c&&g)return!0;if(p+=g,this.enableFrictionReduction){var m=this.enableFriction;this.enableFriction=!1}N(y,a);var b=this.convexCapsule(o,y,s,u,t,e,n,i,c);return this.enableFrictionReduction&&(this.enableFriction=m),!(!c||!b)||(p+=b,this.enableFrictionReduction&&p&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p)},O.prototype[f.LINE|f.LINE]=O.prototype.lineLine=function(t,e,n,r,i,o,a,s,u){return!u&&0},O.prototype[f.PLANE|f.LINE]=O.prototype.planeLine=function(t,e,n,s,u,c,l,h,p){var f=y,d=g,x=m,P=b,S=A,L=_,q=w,M=E,C=B,F=R,I=0;r.set(f,-c.length/2,0),r.set(d,c.length/2,0),r.rotate(x,f,h),r.rotate(P,d,h),o(x,x,l),o(P,P,l),r.copy(f,x),r.copy(d,P),i(S,d,f),r.normalize(L,S),r.rotate90cw(C,L),r.rotate(M,v,s),F[0]=f,F[1]=d;for(var O=0;O<F.length;O++){var V=F[O];i(q,V,n);var T=a(q,M);if(T<0){if(p)return!0;var N=this.createContactEquation(t,u,e,c);I++,r.copy(N.normalA,M),r.normalize(N.normalA,N.normalA),r.scale(q,M,T),i(N.contactPointA,V,q),i(N.contactPointA,N.contactPointA,t.position),i(N.contactPointB,V,l),o(N.contactPointB,N.contactPointB,l),i(N.contactPointB,N.contactPointB,u.position),this.contactEquations.push(N),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(N))}}return!p&&(this.enableFrictionReduction||I&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(I)),I)},O.prototype[f.PARTICLE|f.CAPSULE]=O.prototype.particleCapsule=function(t,e,n,r,i,o,a,s,u){return this.circleLine(t,e,n,r,i,o,a,s,u,o.radius,0)},O.prototype[f.CIRCLE|f.LINE]=O.prototype.circleLine=function(t,e,n,s,u,c,l,h,p,f,d){f=f||0,d=void 0!==d?d:e.radius;var v=y,M=g,C=m,F=b,I=A,O=_,V=w,T=E,N=B,k=x,G=P,j=S,U=L,z=q,W=R;r.set(T,-c.length/2,0),r.set(N,c.length/2,0),r.rotate(k,T,h),r.rotate(G,N,h),o(k,k,l),o(G,G,l),r.copy(T,k),r.copy(N,G),i(O,N,T),r.normalize(V,O),r.rotate90cw(I,V),i(j,n,T);var D=a(j,I);i(F,T,l),i(U,n,l);var X=d+f;if(Math.abs(D)<X){r.scale(v,I,D),i(C,n,v),r.scale(M,I,a(I,U)),r.normalize(M,M),r.scale(M,M,f),o(C,C,M);var Y=a(V,C),K=a(V,T),H=a(V,N);if(Y>K&&Y<H){if(p)return!0;var $=this.createContactEquation(t,u,e,c);return r.scale($.normalA,v,-1),r.normalize($.normalA,$.normalA),r.scale($.contactPointA,$.normalA,d),o($.contactPointA,$.contactPointA,n),i($.contactPointA,$.contactPointA,t.position),i($.contactPointB,C,l),o($.contactPointB,$.contactPointB,l),i($.contactPointB,$.contactPointB,u.position),this.contactEquations.push($),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($)),1}}W[0]=T,W[1]=N;for(var Z=0;Z<W.length;Z++){var J=W[Z];if(i(j,J,n),r.squaredLength(j)<Math.pow(X,2)){if(p)return!0;$=this.createContactEquation(t,u,e,c);return r.copy($.normalA,j),r.normalize($.normalA,$.normalA),r.scale($.contactPointA,$.normalA,d),o($.contactPointA,$.contactPointA,n),i($.contactPointA,$.contactPointA,t.position),i($.contactPointB,J,l),r.scale(z,$.normalA,-f),o($.contactPointB,$.contactPointB,z),o($.contactPointB,$.contactPointB,l),i($.contactPointB,$.contactPointB,u.position),this.contactEquations.push($),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($)),1}}return 0},O.prototype[f.CIRCLE|f.CAPSULE]=O.prototype.circleCapsule=function(t,e,n,r,i,o,a,s,u){return this.circleLine(t,e,n,r,i,o,a,s,u,o.radius)},O.prototype[f.CIRCLE|f.CONVEX]=O.prototype[f.CIRCLE|f.BOX]=O.prototype.circleConvex=function(t,e,n,a,s,u,c,l,h,p){p="number"==typeof p?p:e.radius;for(var f=y,d=g,v=m,_=b,w=A,E=x,B=P,S=L,F=q,I=M,R=C,O=!1,V=Number.MAX_VALUE,T=u.vertices,N=0;N!==T.length+1;N++){var k=T[N%T.length],G=T[(N+1)%T.length];if(r.rotate(f,k,l),r.rotate(d,G,l),o(f,f,c),o(d,d,c),i(v,d,f),r.normalize(_,v),r.rotate90cw(w,_),r.scale(F,w,-e.radius),o(F,F,n),K(F,u,c,l)){r.sub(I,f,F);var j=Math.abs(r.dot(I,w));j<V&&(r.copy(R,F),V=j,r.scale(S,w,j),r.add(S,S,F),O=!0)}}if(O){if(h)return!0;var U=this.createContactEquation(t,s,e,u);return r.sub(U.normalA,R,n),r.normalize(U.normalA,U.normalA),r.scale(U.contactPointA,U.normalA,p),o(U.contactPointA,U.contactPointA,n),i(U.contactPointA,U.contactPointA,t.position),i(U.contactPointB,S,c),o(U.contactPointB,U.contactPointB,c),i(U.contactPointB,U.contactPointB,s.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}if(p>0)for(N=0;N<T.length;N++){var z=T[N];if(r.rotate(B,z,l),o(B,B,c),i(E,B,n),r.squaredLength(E)<Math.pow(p,2)){if(h)return!0;U=this.createContactEquation(t,s,e,u);return r.copy(U.normalA,E),r.normalize(U.normalA,U.normalA),r.scale(U.contactPointA,U.normalA,p),o(U.contactPointA,U.contactPointA,n),i(U.contactPointA,U.contactPointA,t.position),i(U.contactPointB,B,c),o(U.contactPointB,U.contactPointB,c),i(U.contactPointB,U.contactPointB,s.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}}return 0};var W=r.create(),D=r.create(),X=r.create(),Y=r.create();function K(t,e,n,a){for(var s=W,u=D,c=X,l=Y,h=t,p=e.vertices,f=null,d=0;d!==p.length+1;d++){var v=p[d%p.length],y=p[(d+1)%p.length];r.rotate(s,v,a),r.rotate(u,y,a),o(s,s,n),o(u,u,n),i(c,s,h),i(l,u,h);var g=r.crossLength(c,l);if(null===f&&(f=g),g*f<=0)return!1;f=g}return!0}O.prototype[f.PARTICLE|f.CONVEX]=O.prototype[f.PARTICLE|f.BOX]=O.prototype.particleConvex=function(t,e,n,s,u,c,l,h,p){var f=y,d=g,v=m,E=b,B=A,P=_,S=w,q=x,M=L,C=F,R=I,O=Number.MAX_VALUE,V=!1,T=c.vertices;if(!K(n,c,l,h))return 0;if(p)return!0;for(var N=0;N!==T.length+1;N++){var k=T[N%T.length],G=T[(N+1)%T.length];r.rotate(f,k,h),r.rotate(d,G,h),o(f,f,l),o(d,d,l),i(v,d,f),r.normalize(E,v),r.rotate90cw(B,E),i(q,n,f);a(q,B);i(P,f,l),i(S,n,l),r.sub(C,f,n);var j=Math.abs(r.dot(C,B));j<O&&(O=j,r.scale(M,B,j),r.add(M,M,n),r.copy(R,B),V=!0)}if(V){var U=this.createContactEquation(t,u,e,c);return r.scale(U.normalA,R,-1),r.normalize(U.normalA,U.normalA),r.set(U.contactPointA,0,0),o(U.contactPointA,U.contactPointA,n),i(U.contactPointA,U.contactPointA,t.position),i(U.contactPointB,M,l),o(U.contactPointB,U.contactPointB,l),i(U.contactPointB,U.contactPointB,u.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}return 0},O.prototype[f.CIRCLE]=O.prototype.circleCircle=function(t,e,n,a,s,u,c,l,h,p,f){var d=y;p=p||e.radius,f=f||u.radius;i(d,n,c);var v=p+f;if(r.squaredLength(d)>Math.pow(v,2))return 0;if(h)return!0;var g=this.createContactEquation(t,s,e,u);return i(g.normalA,c,n),r.normalize(g.normalA,g.normalA),r.scale(g.contactPointA,g.normalA,p),r.scale(g.contactPointB,g.normalA,-f),o(g.contactPointA,g.contactPointA,n),i(g.contactPointA,g.contactPointA,t.position),o(g.contactPointB,g.contactPointB,c),i(g.contactPointB,g.contactPointB,s.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},O.prototype[f.PLANE|f.CONVEX]=O.prototype[f.PLANE|f.BOX]=O.prototype.planeConvex=function(t,e,n,s,u,c,l,h,p){var f=y,d=g,b=m,A=0;r.rotate(d,v,s);for(var _=0;_!==c.vertices.length;_++){var w=c.vertices[_];if(r.rotate(f,w,h),o(f,f,l),i(b,f,n),a(b,d)<=0){if(p)return!0;A++;var E=this.createContactEquation(t,u,e,c);i(b,f,n),r.copy(E.normalA,d);var B=a(b,E.normalA);r.scale(b,E.normalA,B),i(E.contactPointB,f,u.position),i(E.contactPointA,f,b),i(E.contactPointA,E.contactPointA,t.position),this.contactEquations.push(E),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(E))}}return this.enableFrictionReduction&&this.enableFriction&&A&&this.frictionEquations.push(this.createFrictionFromAverage(A)),A},O.prototype[f.PARTICLE|f.PLANE]=O.prototype.particlePlane=function(t,e,n,o,s,u,c,l,h){var p=y,f=g;l=l||0,i(p,n,c),r.rotate(f,v,l);var d=a(p,f);if(d>0)return 0;if(h)return!0;var m=this.createContactEquation(s,t,u,e);return r.copy(m.normalA,f),r.scale(p,m.normalA,d),i(m.contactPointA,n,p),i(m.contactPointA,m.contactPointA,s.position),i(m.contactPointB,n,t.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},O.prototype[f.CIRCLE|f.PARTICLE]=O.prototype.circleParticle=function(t,e,n,a,s,u,c,l,h){var p=y;if(i(p,c,n),r.squaredLength(p)>Math.pow(e.radius,2))return 0;if(h)return!0;var f=this.createContactEquation(t,s,e,u);return r.copy(f.normalA,p),r.normalize(f.normalA,f.normalA),r.scale(f.contactPointA,f.normalA,e.radius),o(f.contactPointA,f.contactPointA,n),i(f.contactPointA,f.contactPointA,t.position),i(f.contactPointB,c,s.position),this.contactEquations.push(f),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(f)),1};var H=new h({radius:1}),$=r.create(),Z=r.create();r.create();O.prototype[f.PLANE|f.CAPSULE]=O.prototype.planeCapsule=function(t,e,n,i,a,s,u,c,l){var h,p=$,f=Z,d=H;r.set(p,-s.length/2,0),r.rotate(p,p,c),o(p,p,u),r.set(f,s.length/2,0),r.rotate(f,f,c),o(f,f,u),d.radius=s.radius,this.enableFrictionReduction&&(h=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(a,d,p,0,t,e,n,i,l),y=this.circlePlane(a,d,f,0,t,e,n,i,l);if(this.enableFrictionReduction&&(this.enableFriction=h),l)return v||y;var g=v+y;return this.enableFrictionReduction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},O.prototype[f.CIRCLE|f.PLANE]=O.prototype.circlePlane=function(t,e,n,s,u,c,l,h,p){var f=t,d=e,b=n,A=u,_=l,w=h;w=w||0;var E=y,B=g,x=m;i(E,b,_),r.rotate(B,v,w);var P=a(B,E);if(P>d.radius)return 0;if(p)return!0;var S=this.createContactEquation(A,f,c,e);return r.copy(S.normalA,B),r.scale(S.contactPointB,S.normalA,-d.radius),o(S.contactPointB,S.contactPointB,b),i(S.contactPointB,S.contactPointB,f.position),r.scale(x,S.normalA,P),i(S.contactPointA,E,x),o(S.contactPointA,S.contactPointA,_),i(S.contactPointA,S.contactPointA,A.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S)),1},O.prototype[f.CONVEX]=O.prototype[f.CONVEX|f.BOX]=O.prototype[f.BOX]=O.prototype.convexConvex=function(t,e,n,s,u,c,l,h,p,f){var d=y,v=g,_=m,x=b,P=A,S=w,L=E,q=B,M=0;f="number"==typeof f?f:0;if(!O.findSeparatingAxis(e,n,s,c,l,h,d))return 0;i(L,l,n),a(d,L)>0&&r.scale(d,d,-1);var C=O.getClosestEdge(e,s,d,!0),F=O.getClosestEdge(c,h,d);if(-1===C||-1===F)return 0;for(var I=0;I<2;I++){var R,V=C,T=F,N=e,k=c,G=n,j=l,U=s,z=h,W=t,D=u;if(0===I)R=V,V=T,T=R,R=N,N=k,k=R,R=G,G=j,j=R,R=U,U=z,z=R,R=W,W=D,D=R;for(var X=T;X<T+2;X++){var Y=k.vertices[(X+k.vertices.length)%k.vertices.length];r.rotate(v,Y,z),o(v,v,j);for(var K=0,H=V-1;H<V+2;H++){var $=N.vertices[(H+N.vertices.length)%N.vertices.length],Z=N.vertices[(H+1+N.vertices.length)%N.vertices.length];r.rotate(_,$,U),r.rotate(x,Z,U),o(_,_,G),o(x,x,G),i(P,x,_),r.rotate90cw(q,P),r.normalize(q,q),i(L,v,_);var J=a(q,L);(H===V&&J<=f||H!==V&&J<=0)&&K++}if(K>=3){if(p)return!0;var Q=this.createContactEquation(W,D,N,k);M++;$=N.vertices[V%N.vertices.length],Z=N.vertices[(V+1)%N.vertices.length];r.rotate(_,$,U),r.rotate(x,Z,U),o(_,_,G),o(x,x,G),i(P,x,_),r.rotate90cw(Q.normalA,P),r.normalize(Q.normalA,Q.normalA),i(L,v,_);J=a(Q.normalA,L);r.scale(S,Q.normalA,J),i(Q.contactPointA,v,G),i(Q.contactPointA,Q.contactPointA,S),o(Q.contactPointA,Q.contactPointA,G),i(Q.contactPointA,Q.contactPointA,W.position),i(Q.contactPointB,v,j),o(Q.contactPointB,Q.contactPointB,j),i(Q.contactPointB,Q.contactPointB,D.position),this.contactEquations.push(Q),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q))}}}return this.enableFrictionReduction&&this.enableFriction&&M&&this.frictionEquations.push(this.createFrictionFromAverage(M)),M};var J=r.fromValues(0,0);O.projectConvexOntoAxis=function(t,e,n,i,o){var s,u,c=null,l=null,h=J;r.rotate(h,i,-n);for(var p=0;p<t.vertices.length;p++)s=t.vertices[p],u=a(s,h),(null===c||u>c)&&(c=u),(null===l||u<l)&&(l=u);if(l>c){var f=l;l=c,c=f}var d=a(e,i);r.set(o,l+d,c+d)};var Q=r.fromValues(0,0),tt=r.fromValues(0,0),et=r.fromValues(0,0),nt=r.fromValues(0,0),rt=r.fromValues(0,0),it=r.fromValues(0,0);O.findSeparatingAxis=function(t,e,n,o,a,s,u){var c=null,l=!1,h=!1,p=Q,f=tt,v=et,y=nt,g=rt,m=it;if(t instanceof d&&o instanceof d)for(var b=0;2!==b;b++){var A=t,_=n;1===b&&(A=o,_=s);for(var w=0;2!==w;w++){0===w?r.set(y,0,1):1===w&&r.set(y,1,0),0!==_&&r.rotate(y,y,_),O.projectConvexOntoAxis(t,e,n,y,g),O.projectConvexOntoAxis(o,a,s,y,m);var E=g,B=m;g[0]>m[0]&&(B=g,E=m,!0),l=(x=B[0]-E[1])<=0,(null===c||x>c)&&(r.copy(u,y),c=x,h=l)}}else for(b=0;2!==b;b++){A=t,_=n;1===b&&(A=o,_=s);for(w=0;w!==A.vertices.length;w++){r.rotate(f,A.vertices[w],_),r.rotate(v,A.vertices[(w+1)%A.vertices.length],_),i(p,v,f),r.rotate90cw(y,p),r.normalize(y,y),O.projectConvexOntoAxis(t,e,n,y,g),O.projectConvexOntoAxis(o,a,s,y,m);var x;E=g,B=m;g[0]>m[0]&&(B=g,E=m,!0),l=(x=B[0]-E[1])<=0,(null===c||x>c)&&(r.copy(u,y),c=x,h=l)}}return h};var ot=r.fromValues(0,0),at=r.fromValues(0,0),st=r.fromValues(0,0);O.getClosestEdge=function(t,e,n,o){var s=ot,u=at,c=st;r.rotate(s,n,-e),o&&r.scale(s,s,-1);for(var l=-1,h=t.vertices.length,p=-1,f=0;f!==h;f++){i(u,t.vertices[(f+1)%h],t.vertices[f%h]),r.rotate90cw(c,u),r.normalize(c,c);var d=a(c,s);(-1===l||d>p)&&(l=f%h,p=d)}return l};var ut=r.create(),ct=r.create(),lt=r.create(),ht=r.create(),pt=r.create(),ft=r.create(),dt=r.create();O.prototype[f.CIRCLE|f.HEIGHTFIELD]=O.prototype.circleHeightfield=function(t,e,n,a,s,u,c,l,h,p){var f=u.heights,d=(p=p||e.radius,u.elementWidth),v=ct,y=ut,g=pt,m=dt,b=ft,A=lt,_=ht,w=Math.floor((n[0]-p-c[0])/d),E=Math.ceil((n[0]+p-c[0])/d);w<0&&(w=0),E>=f.length&&(E=f.length-1);for(var B=f[w],x=f[E],P=w;P<E;P++)f[P]<x&&(x=f[P]),f[P]>B&&(B=f[P]);if(n[1]-p>B)return!h&&0;var S=!1;for(P=w;P<E;P++){r.set(A,P*d,f[P]),r.set(_,(P+1)*d,f[P+1]),r.add(A,A,c),r.add(_,_,c),r.sub(b,_,A),r.rotate(b,b,Math.PI/2),r.normalize(b,b),r.scale(y,b,-p),r.add(y,y,n),r.sub(v,y,A);var L=r.dot(v,b);if(y[0]>=A[0]&&y[0]<_[0]&&L<=0){if(h)return!0;S=!0,r.scale(v,b,-L),r.add(g,y,v),r.copy(m,b);var q=this.createContactEquation(s,t,u,e);r.copy(q.normalA,m),r.scale(q.contactPointB,q.normalA,-p),o(q.contactPointB,q.contactPointB,n),i(q.contactPointB,q.contactPointB,t.position),r.copy(q.contactPointA,g),r.sub(q.contactPointA,q.contactPointA,s.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q))}}if(S=!1,p>0)for(P=w;P<=E;P++)if(r.set(A,P*d,f[P]),r.add(A,A,c),r.sub(v,n,A),r.squaredLength(v)<Math.pow(p,2)){if(h)return!0;S=!0;q=this.createContactEquation(s,t,u,e);r.copy(q.normalA,v),r.normalize(q.normalA,q.normalA),r.scale(q.contactPointB,q.normalA,-p),o(q.contactPointB,q.contactPointB,n),i(q.contactPointB,q.contactPointB,t.position),i(q.contactPointA,A,c),o(q.contactPointA,q.contactPointA,c),i(q.contactPointA,q.contactPointA,s.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q))}return S?1:0};var vt=r.create(),yt=r.create(),gt=r.create(),mt=new p({vertices:[r.create(),r.create(),r.create(),r.create()]});O.prototype[f.BOX|f.HEIGHTFIELD]=O.prototype[f.CONVEX|f.HEIGHTFIELD]=O.prototype.convexHeightfield=function(t,e,n,i,o,a,s,u,c){var l=a.heights,h=a.elementWidth,p=vt,f=yt,d=gt,v=mt,y=Math.floor((t.aabb.lowerBound[0]-s[0])/h),g=Math.ceil((t.aabb.upperBound[0]-s[0])/h);y<0&&(y=0),g>=l.length&&(g=l.length-1);for(var m=l[y],b=l[g],A=y;A<g;A++)l[A]<b&&(b=l[A]),l[A]>m&&(m=l[A]);if(t.aabb.lowerBound[1]>m)return!c&&0;var _=0;for(A=y;A<g;A++){r.set(p,A*h,l[A]),r.set(f,(A+1)*h,l[A+1]),r.add(p,p,s),r.add(f,f,s);r.set(d,.5*(f[0]+p[0]),.5*(f[1]+p[1]-100)),r.sub(v.vertices[0],f,d),r.sub(v.vertices[1],p,d),r.copy(v.vertices[2],v.vertices[1]),r.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=100,v.vertices[3][1]-=100,_+=this.convexConvex(t,e,n,i,o,v,d,0,c)}return _}},function(t,e,n){var r=n(1);function i(){this.data={},this.keys=[]}t.exports=i,i.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},i.prototype.getByKey=function(t){return t|=0,this.data[t]},i.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},i.prototype.set=function(t,e,n){if(!n)throw new Error("No data!");var r=this.getKey(t,e);return this.data[r]||this.keys.push(r),this.data[r]=n,r},i.prototype.reset=function(){for(var t=this.data,e=this.keys,n=e.length;n--;)delete t[e[n]];e.length=0},i.prototype.copy=function(t){this.reset(),r.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var n=t.keys[e];this.data[n]=t.data[n]}}},function(t,e,n){var r=n(0),i=n(3),o=n(7);function a(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,n=this.height=t.height||1,a=[r.fromValues(-e/2,-n/2),r.fromValues(e/2,-n/2),r.fromValues(e/2,n/2),r.fromValues(-e/2,n/2)],s=[r.fromValues(1,0),r.fromValues(0,1)];t.vertices=a,t.axes=s,t.type=i.BOX,o.call(this,t)}t.exports=a,a.prototype=new o,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(t){var e=this.width,n=this.height;return t*(n*n+e*e)/12},a.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};r.create(),r.create(),r.create(),r.create();a.prototype.computeAABB=function(t,e,n){t.setFromPoints(this.vertices,e,n,0)},a.prototype.updateArea=function(){this.area=this.width*this.height}},function(t,e,n){var r=n(5),i=n(2),o=n(38),a=n(39),s=n(0);t.exports=f;var u=s.create(),c=s.create(),l=s.fromValues(1,0),h=s.fromValues(0,1),p=s.create();function f(t,e,n){n=n||{},r.call(this,t,e,r.REVOLUTE,n);var f=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE;this.pivotA=s.create(),this.pivotB=s.create(),n.worldPivot?(s.sub(this.pivotA,n.worldPivot,t.position),s.sub(this.pivotB,n.worldPivot,e.position),s.rotate(this.pivotA,this.pivotA,-t.angle),s.rotate(this.pivotB,this.pivotB,-e.angle)):(s.copy(this.pivotA,n.localPivotA),s.copy(this.pivotB,n.localPivotB));var d=this.equations=[new i(t,e,-f,f),new i(t,e,-f,f)],v=d[0],y=d[1],g=this;v.computeGq=function(){return s.rotate(u,g.pivotA,t.angle),s.rotate(c,g.pivotB,e.angle),s.add(p,e.position,c),s.sub(p,p,t.position),s.sub(p,p,u),s.dot(p,l)},y.computeGq=function(){return s.rotate(u,g.pivotA,t.angle),s.rotate(c,g.pivotB,e.angle),s.add(p,e.position,c),s.sub(p,p,t.position),s.sub(p,p,u),s.dot(p,h)},y.minForce=v.minForce=-f,y.maxForce=v.maxForce=f,this.motorEquation=new o(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new a(t,e),this.lowerLimitEquation=new a(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}f.prototype=new r,f.prototype.constructor=f,f.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},f.prototype.update=function(){var t,e=this.bodyA,n=this.bodyB,r=this.pivotA,i=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),p=o[1],f=this.upperLimit,d=this.lowerLimit,v=this.upperLimitEquation,y=this.lowerLimitEquation,g=this.angle=n.angle-e.angle;this.upperLimitEnabled&&g>f?(v.angle=f,-1===o.indexOf(v)&&o.push(v)):-1!==(t=o.indexOf(v))&&o.splice(t,1);this.lowerLimitEnabled&&g<d?(y.angle=d,-1===o.indexOf(y)&&o.push(y)):-1!==(t=o.indexOf(y))&&o.splice(t,1);s.rotate(u,r,e.angle),s.rotate(c,i,n.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-s.crossLength(u,l),a.G[3]=1,a.G[4]=0,a.G[5]=s.crossLength(c,l),p.G[0]=0,p.G[1]=-1,p.G[2]=-s.crossLength(u,h),p.G[3]=0,p.G[4]=1,p.G[5]=s.crossLength(c,h)},f.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},f.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},f.prototype.motorIsEnabled=function(){return!!this.motorEnabled},f.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},f.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},function(t,e,n){var r=n(2);n(0);function i(t,e){r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.computeB=function(t,e,n){var r=this.G;r[2]=-1,r[5]=this.ratio;var i=this.computeGiMf();return-this.computeGW()*e-n*i}},function(t,e,n){var r=n(2),i=n(0);function o(t,e,n){n=n||{},r.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0;var i=this.G;i[2]=1,i[5]=-1}t.exports=o,o.prototype=new r,o.prototype.constructor=o;var a=i.create(),s=i.create(),u=i.fromValues(1,0),c=i.fromValues(0,1);o.prototype.computeGq=function(){return i.rotate(a,u,this.bodyA.angle+this.angle),i.rotate(s,c,this.bodyB.angle),i.dot(a,s)}},function(t,e,n){var r=n(5),i=n(14),o=n(2),a=n(0),s=n(39);function u(t,e,n){n=n||{},r.call(this,t,e,r.PRISMATIC,n);var u=a.fromValues(0,0),c=a.fromValues(1,0),l=a.fromValues(0,0);n.localAnchorA&&a.copy(u,n.localAnchorA),n.localAxisA&&a.copy(c,n.localAxisA),n.localAnchorB&&a.copy(l,n.localAnchorB),this.localAnchorA=u,this.localAnchorB=l,this.localAxisA=c;var h=this.maxForce=void 0!==n.maxForce?n.maxForce:Number.MAX_VALUE,p=new o(t,e,-h,h),f=new a.create,d=new a.create,v=new a.create,y=new a.create;if(p.computeGq=function(){return a.dot(v,y)},p.updateJacobian=function(){var n=this.G,r=t.position,i=e.position;a.rotate(f,u,t.angle),a.rotate(d,l,e.angle),a.add(v,i,d),a.sub(v,v,r),a.sub(v,v,f),a.rotate(y,c,t.angle+Math.PI/2),n[0]=-y[0],n[1]=-y[1],n[2]=-a.crossLength(f,y)+a.crossLength(y,v),n[3]=y[0],n[4]=y[1],n[5]=a.crossLength(d,y)},this.equations.push(p),!n.disableRotationalLock){var g=new s(t,e,-h,h);this.equations.push(g)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==n.lowerLimit,this.upperLimitEnabled=void 0!==n.upperLimit,this.lowerLimit=void 0!==n.lowerLimit?n.lowerLimit:0,this.upperLimit=void 0!==n.upperLimit?n.upperLimit:1,this.upperLimitEquation=new i(t,e),this.lowerLimitEquation=new i(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=h,this.motorEquation=new o(t,e),this.motorEnabled=!1,this.motorSpeed=0;var m=this,b=this.motorEquation;b.computeGW;b.computeGq=function(){return 0},b.computeGW=function(){var t=this.G,e=this.bodyA,n=this.bodyB,r=e.velocity,i=n.velocity,o=e.angularVelocity,a=n.angularVelocity;return this.gmult(t,r,o,i,a)+m.motorSpeed}}t.exports=u,u.prototype=new r,u.prototype.constructor=u;var c=a.create(),l=a.create(),h=a.create(),p=a.create(),f=a.create(),d=a.create();u.prototype.update=function(){var t=this.equations,e=t[0],n=this.upperLimit,r=this.lowerLimit,i=this.upperLimitEquation,o=this.lowerLimitEquation,s=this.bodyA,u=this.bodyB,v=this.localAxisA,y=this.localAnchorA,g=this.localAnchorB;e.updateJacobian(),a.rotate(c,v,s.angle),a.rotate(p,y,s.angle),a.add(l,p,s.position),a.rotate(f,g,u.angle),a.add(h,f,u.position);var m,b=this.position=a.dot(h,c)-a.dot(l,c);if(this.motorEnabled){var A=this.motorEquation.G;A[0]=c[0],A[1]=c[1],A[2]=a.crossLength(c,f),A[3]=-c[0],A[4]=-c[1],A[5]=-a.crossLength(c,p)}this.upperLimitEnabled&&b>n?(a.scale(i.normalA,c,-1),a.sub(i.contactPointA,l,s.position),a.sub(i.contactPointB,h,u.position),a.scale(d,c,n),a.add(i.contactPointA,i.contactPointA,d),-1===t.indexOf(i)&&t.push(i)):-1!==(m=t.indexOf(i))&&t.splice(m,1);this.lowerLimitEnabled&&b<r?(a.scale(o.normalA,c,1),a.sub(o.contactPointA,l,s.position),a.sub(o.contactPointB,h,u.position),a.scale(d,c,r),a.sub(o.contactPointB,o.contactPointB,d),-1===t.indexOf(o)&&t.push(o)):-1!==(m=t.indexOf(o))&&t.splice(m,1)},u.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},u.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},u.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},function(t,e,n){var r=n(1),i=n(12);function o(){i.call(this,i.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var n=t.axisList.indexOf(e.body);-1!==n&&t.axisList.splice(n,1)}}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.setWorld=function(t){this.axisList.length=0,r.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},o.sortAxisList=function(t,e){e|=0;for(var n=1,r=t.length;n<r;n++){for(var i=t[n],o=n-1;o>=0&&!(t[o].aabb.lowerBound[e]<=i.aabb.lowerBound[e]);o--)t[o+1]=t[o];t[o+1]=i}return t},o.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;o.sortAxisList(t,e)},o.prototype.getCollisionPairs=function(t){var e=this.axisList,n=this.result,r=this.axisIndex;n.length=0;for(var o=e.length;o--;){var a=e[o];a.aabbNeedsUpdate&&a.updateAABB()}this.sortList();for(var s=0,u=0|e.length;s!==u;s++)for(var c=e[s],l=s+1;l<u;l++){var h=e[l];if(!(h.aabb.lowerBound[r]<=c.aabb.upperBound[r]))break;i.canCollide(c,h)&&this.boundingVolumeCheck(c,h)&&n.push(c,h)}return n},o.prototype.aabbQuery=function(t,e,n){n=n||[],this.sortList();var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var o=this.axisList,a=(e.lowerBound[i],e.upperBound[i],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},function(t,e,n){var r=n(0),i=n(20);n(1);function o(t,e,n){n=n||{},i.call(this,t,e,n),this.localAnchorA=r.fromValues(0,0),this.localAnchorB=r.fromValues(0,0),n.localAnchorA&&r.copy(this.localAnchorA,n.localAnchorA),n.localAnchorB&&r.copy(this.localAnchorB,n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);var o=r.create(),a=r.create();this.getWorldAnchorA(o),this.getWorldAnchorB(a);var s=r.distance(o,a);this.restLength="number"==typeof n.restLength?n.restLength:s}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},o.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},o.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},o.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var a=r.create(),s=r.create(),u=r.create(),c=r.create(),l=r.create(),h=r.create(),p=r.create(),f=r.create(),d=r.create();o.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,i=this.bodyA,o=this.bodyB,v=a,y=s,g=u,m=c,b=d,A=l,_=h,w=p,E=f;this.getWorldAnchorA(A),this.getWorldAnchorB(_),r.sub(w,A,i.position),r.sub(E,_,o.position),r.sub(v,_,A);var B=r.len(v);r.normalize(y,v),r.sub(g,o.velocity,i.velocity),r.crossZV(b,o.angularVelocity,E),r.add(g,g,b),r.crossZV(b,i.angularVelocity,w),r.sub(g,g,b),r.scale(m,y,-t*(B-n)-e*r.dot(g,y)),r.sub(i.force,i.force,m),r.add(o.force,o.force,m);var x=r.crossLength(w,m),P=r.crossLength(E,m);i.angularForce-=x,o.angularForce+=P}},function(t,e,n){n(0);var r=n(20);function i(t,e,n){n=n||{},r.call(this,t,e,n),this.restAngle="number"==typeof n.restAngle?n.restAngle:e.angle-t.angle}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restAngle,r=this.bodyA,i=this.bodyB,o=-t*(i.angle-r.angle-n)-e*(i.angularVelocity-r.angularVelocity)*0;r.angularForce-=o,i.angularForce+=o}},function(t){t.exports={_args:[["p2@0.7.1","/private/var/www/region-labels"]],_from:"p2@0.7.1",_id:"p2@0.7.1",_inBundle:!1,_integrity:"sha1-JfJHTZvDptMUCh2iamfJ4RislUM=",_location:"/p2",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"p2@0.7.1",name:"p2",escapedName:"p2",rawSpec:"0.7.1",saveSpec:null,fetchSpec:"0.7.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz",_spec:"0.7.1",_where:"/private/var/www/region-labels",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},dependencies:{"poly-decomp":"0.1.1"},description:"A JavaScript 2D physics engine.",devDependencies:{grunt:"^0.4.5","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0"},engines:{node:"*"},homepage:"https://github.com/schteppe/p2.js#readme",keywords:["p2.js","p2","physics","engine","2d"],licenses:[{type:"MIT"}],main:"./src/p2.js",name:"p2",repository:{type:"git",url:"git+https://github.com/schteppe/p2.js.git"},version:"0.7.1"}},function(t,e){function n(t,e,n,r){this.shapeA=e,this.shapeB=r,this.bodyA=t,this.bodyB=n}t.exports=n,n.prototype.set=function(t,e,r,i){n.call(this,t,e,r,i)}},function(t,e,n){var r=n(4);function i(){this.equations=[],this.bodies=[]}t.exports=i,i.prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];i.prototype.getBodies=function(t){var e=t||[],n=this.equations;o.length=0;for(var r=0;r!==n.length;r++){var i=n[r];-1===o.indexOf(i.bodyA.id)&&(e.push(i.bodyA),o.push(i.bodyA.id)),-1===o.indexOf(i.bodyB.id)&&(e.push(i.bodyB),o.push(i.bodyB.id))}return e},i.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===r.DYNAMIC&&!e.wantsToSleep)return!1}return!0},i.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},function(t,e){function n(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=n,n.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},function(t,e,n){t.exports=n},function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="__lodash_hash_undefined__",l=500,h="__lodash_placeholder__",p=1,f=2,d=4,v=1,y=2,g=1,m=2,b=4,A=8,_=16,w=32,E=64,B=128,x=256,P=512,S=30,L="...",q=800,M=16,C=1,F=2,I=1/0,R=9007199254740991,O=1.7976931348623157e308,V=NaN,T=4294967295,N=T-1,k=T>>>1,G=[["ary",B],["bind",g],["bindKey",m],["curry",A],["curryRight",_],["flip",P],["partial",w],["partialRight",E],["rearg",x]],j="[object Arguments]",U="[object Array]",z="[object AsyncFunction]",W="[object Boolean]",D="[object Date]",X="[object DOMException]",Y="[object Error]",K="[object Function]",H="[object GeneratorFunction]",$="[object Map]",Z="[object Number]",J="[object Null]",Q="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",st="[object WeakSet]",ut="[object ArrayBuffer]",ct="[object DataView]",lt="[object Float32Array]",ht="[object Float64Array]",pt="[object Int8Array]",ft="[object Int16Array]",dt="[object Int32Array]",vt="[object Uint8Array]",yt="[object Uint8ClampedArray]",gt="[object Uint16Array]",mt="[object Uint32Array]",bt=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,Bt=RegExp(wt.source),xt=RegExp(Et.source),Pt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,qt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ft=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Ft.source),Rt=/^\s+|\s+$/g,Ot=/^\s+/,Vt=/\s+$/,Tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,kt=/,? & /,Gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zt=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,Yt=/^0o[0-7]+$/i,Kt=/^(?:0|[1-9]\d*)$/,Ht=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Qt+"]",ne="["+Jt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Qt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",pe="(?:"+oe+"|"+ae+")",fe="(?:"+he+"|"+ae+")",de="(?:"+ne+"|"+se+")"+"?",ve="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[ue,ce,le].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),ye="(?:"+[ie,ce,le].join("|")+")"+ve,ge="(?:"+[ue+ne+"?",ne,ce,le,te].join("|")+")",me=RegExp("['’]","g"),be=RegExp(ne,"g"),Ae=RegExp(se+"(?="+se+")|"+ge+ve,"g"),_e=RegExp([he+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+pe,"$"].join("|")+")",he+"?"+pe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,ye].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+Jt+"\\ufe0e\\ufe0f]"),Ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Be=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xe=-1,Pe={};Pe[lt]=Pe[ht]=Pe[pt]=Pe[ft]=Pe[dt]=Pe[vt]=Pe[yt]=Pe[gt]=Pe[mt]=!0,Pe[j]=Pe[U]=Pe[ut]=Pe[W]=Pe[ct]=Pe[D]=Pe[Y]=Pe[K]=Pe[$]=Pe[Z]=Pe[Q]=Pe[et]=Pe[nt]=Pe[rt]=Pe[at]=!1;var Se={};Se[j]=Se[U]=Se[ut]=Se[ct]=Se[W]=Se[D]=Se[lt]=Se[ht]=Se[pt]=Se[ft]=Se[dt]=Se[$]=Se[Z]=Se[Q]=Se[et]=Se[nt]=Se[rt]=Se[it]=Se[vt]=Se[yt]=Se[gt]=Se[mt]=!0,Se[Y]=Se[K]=Se[at]=!1;var Le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qe=parseFloat,Me=parseInt,Ce="object"==typeof t&&t&&t.Object===Object&&t,Fe="object"==typeof self&&self&&self.Object===Object&&self,Ie=Ce||Fe||Function("return this")(),Re=e&&!e.nodeType&&e,Oe=Re&&"object"==typeof r&&r&&!r.nodeType&&r,Ve=Oe&&Oe.exports===Re,Te=Ve&&Ce.process,Ne=function(){try{var t=Oe&&Oe.require&&Oe.require("util").types;return t||Te&&Te.binding&&Te.binding("util")}catch(t){}}(),ke=Ne&&Ne.isArrayBuffer,Ge=Ne&&Ne.isDate,je=Ne&&Ne.isMap,Ue=Ne&&Ne.isRegExp,ze=Ne&&Ne.isSet,We=Ne&&Ne.isTypedArray;function De(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Xe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ke(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function He(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function $e(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ze(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function Je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=pn("length");function an(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function sn(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function un(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):sn(t,ln,n)}function cn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function ln(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:V}function pn(t){return function(e){return null==e?o:e[t]}}function fn(t){return function(e){return null==t?o:t[e]}}function dn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function yn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function gn(t){return function(e){return t(e)}}function mn(t,e){return Qe(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function An(t,e){for(var n=-1,r=t.length;++n<r&&un(e,t[n],0)>-1;);return n}function _n(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var wn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),En=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bn(t){return"\\"+Le[t]}function xn(t){return we.test(t)}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Sn(t,e){return function(n){return t(e(n))}}function Ln(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==h||(t[n]=h,o[i++]=n)}return o}function qn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Mn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Cn(t){return xn(t)?function(t){var e=Ae.lastIndex=0;for(;Ae.test(t);)++e;return e}(t):on(t)}function Fn(t){return xn(t)?function(t){return t.match(Ae)||[]}(t):function(t){return t.split("")}(t)}var In=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Rn=function t(e){var n,r=(e=null==e?Ie:Rn.defaults(Ie.Object(),e,Rn.pick(Ie,Be))).Array,i=e.Date,Jt=e.Error,Qt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=r.prototype,ae=Qt.prototype,se=ee.prototype,ue=e["__core-js_shared__"],ce=ae.toString,le=se.hasOwnProperty,he=0,pe=(n=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",fe=se.toString,de=ce.call(ee),ve=Ie._,ye=ne("^"+ce.call(le).replace(Ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Ve?e.Buffer:o,Ae=e.Symbol,we=e.Uint8Array,Le=ge?ge.allocUnsafe:o,Ce=Sn(ee.getPrototypeOf,ee),Fe=ee.create,Re=se.propertyIsEnumerable,Oe=oe.splice,Te=Ae?Ae.isConcatSpreadable:o,Ne=Ae?Ae.iterator:o,on=Ae?Ae.toStringTag:o,fn=function(){try{var t=ko(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),On=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Vn=i&&i.now!==Ie.Date.now&&i.now,Tn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,Nn=te.ceil,kn=te.floor,Gn=ee.getOwnPropertySymbols,jn=ge?ge.isBuffer:o,Un=e.isFinite,zn=oe.join,Wn=Sn(ee.keys,ee),Dn=te.max,Xn=te.min,Yn=i.now,Kn=e.parseInt,Hn=te.random,$n=oe.reverse,Zn=ko(e,"DataView"),Jn=ko(e,"Map"),Qn=ko(e,"Promise"),tr=ko(e,"Set"),er=ko(e,"WeakMap"),nr=ko(ee,"create"),rr=er&&new er,ir={},or=ha(Zn),ar=ha(Jn),sr=ha(Qn),ur=ha(tr),cr=ha(er),lr=Ae?Ae.prototype:o,hr=lr?lr.valueOf:o,pr=lr?lr.toString:o;function fr(t){if(Ls(t)&&!gs(t)&&!(t instanceof gr)){if(t instanceof yr)return t;if(le.call(t,"__wrapped__"))return pa(t)}return new yr(t)}var dr=function(){function t(){}return function(e){if(!Ss(e))return{};if(Fe)return Fe(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function vr(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=T,this.__views__=[]}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ar(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ar;++e<n;)this.add(t[e])}function wr(t){var e=this.__data__=new br(t);this.size=e.size}function Er(t,e){var n=gs(t),r=!n&&ys(t),i=!n&&!r&&_s(t),o=!n&&!r&&!i&&Vs(t),a=n||r||i||o,s=a?yn(t.length,re):[],u=s.length;for(var c in t)!e&&!le.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Xo(c,u))||s.push(c);return s}function Br(t){var e=t.length;return e?t[_i(0,e-1)]:o}function xr(t,e){return ua(no(t),Rr(e,0,t.length))}function Pr(t){return ua(no(t))}function Sr(t,e,n){(n===o||fs(t[e],n))&&(n!==o||e in t)||Fr(t,e,n)}function Lr(t,e,n){var r=t[e];le.call(t,e)&&fs(r,n)&&(n!==o||e in t)||Fr(t,e,n)}function qr(t,e){for(var n=t.length;n--;)if(fs(t[n][0],e))return n;return-1}function Mr(t,e,n,r){return kr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Cr(t,e){return t&&ro(e,iu(e),t)}function Fr(t,e,n){"__proto__"==e&&fn?fn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ir(t,e){for(var n=-1,i=e.length,a=r(i),s=null==t;++n<i;)a[n]=s?o:Qs(t,e[n]);return a}function Rr(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Or(t,e,n,r,i,a){var s,u=e&p,c=e&f,l=e&d;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!Ss(t))return t;var h=gs(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return no(t,s)}else{var v=Uo(t),y=v==K||v==H;if(_s(t))return $i(t,u);if(v==Q||v==j||y&&!i){if(s=c||y?{}:Wo(t),!u)return c?function(t,e){return ro(t,jo(t),e)}(t,function(t,e){return t&&ro(e,ou(e),t)}(s,t)):function(t,e){return ro(t,Go(t),e)}(t,Cr(s,t))}else{if(!Se[v])return i?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case ut:return Zi(t);case W:case D:return new i(+t);case ct:return function(t,e){var n=e?Zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case lt:case ht:case pt:case ft:case dt:case vt:case yt:case gt:case mt:return Ji(t,n);case $:return new i;case Z:case rt:return new i(t);case et:return function(t){var e=new t.constructor(t.source,zt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case it:return r=t,hr?ee(hr.call(r)):{}}}(t,v,u)}}a||(a=new wr);var g=a.get(t);if(g)return g;if(a.set(t,s),Is(t))return t.forEach(function(r){s.add(Or(r,e,n,r,t,a))}),s;if(qs(t))return t.forEach(function(r,i){s.set(i,Or(r,e,n,i,t,a))}),s;var m=h?o:(l?c?Fo:Co:c?ou:iu)(t);return Ye(m||t,function(r,i){m&&(r=t[i=r]),Lr(s,i,Or(r,e,n,i,t,a))}),s}function Vr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function Tr(t,e,n){if("function"!=typeof t)throw new ie(u);return ia(function(){t.apply(o,n)},e)}function Nr(t,e,n,r){var i=-1,o=Ze,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=Qe(e,gn(n))),r?(o=Je,s=!1):e.length>=a&&(o=bn,s=!1,e=new _r(e));t:for(;++i<u;){var h=t[i],p=null==n?h:n(h);if(h=r||0!==h?h:0,s&&p==p){for(var f=l;f--;)if(e[f]===p)continue t;c.push(h)}else o(e,p,r)||c.push(h)}return c}fr.templateSettings={escape:Pt,evaluate:St,interpolate:Lt,variable:"",imports:{_:fr}},fr.prototype=vr.prototype,fr.prototype.constructor=fr,yr.prototype=dr(vr.prototype),yr.prototype.constructor=yr,gr.prototype=dr(vr.prototype),gr.prototype.constructor=gr,mr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},mr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mr.prototype.get=function(t){var e=this.__data__;if(nr){var n=e[t];return n===c?o:n}return le.call(e,t)?e[t]:o},mr.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==o:le.call(e,t)},mr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nr&&e===o?c:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=qr(e,t);return!(n<0||(n==e.length-1?e.pop():Oe.call(e,n,1),--this.size,0))},br.prototype.get=function(t){var e=this.__data__,n=qr(e,t);return n<0?o:e[n][1]},br.prototype.has=function(t){return qr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=qr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Ar.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Jn||br),string:new mr}},Ar.prototype.delete=function(t){var e=To(this,t).delete(t);return this.size-=e?1:0,e},Ar.prototype.get=function(t){return To(this,t).get(t)},Ar.prototype.has=function(t){return To(this,t).has(t)},Ar.prototype.set=function(t,e){var n=To(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(t){return this.__data__.set(t,c),this},_r.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.clear=function(){this.__data__=new br,this.size=0},wr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wr.prototype.get=function(t){return this.__data__.get(t)},wr.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Jn||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ar(r)}return n.set(t,e),this.size=n.size,this};var kr=ao(Yr),Gr=ao(Kr,!0);function jr(t,e){var n=!0;return kr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ur(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(u===o?s==s&&!Os(s):n(s,u)))var u=s,c=a}return c}function zr(t,e){var n=[];return kr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Wr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Do),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Wr(s,e-1,n,r,i):tn(i,s):r||(i[i.length]=s)}return i}var Dr=so(),Xr=so(!0);function Yr(t,e){return t&&Dr(t,e,iu)}function Kr(t,e){return t&&Xr(t,e,iu)}function Hr(t,e){return $e(e,function(e){return Bs(t[e])})}function $r(t,e){for(var n=0,r=(e=Xi(e,t)).length;null!=t&&n<r;)t=t[la(e[n++])];return n&&n==r?t:o}function Zr(t,e,n){var r=e(t);return gs(t)?r:tn(r,n(t))}function Jr(t){return null==t?t===o?ot:J:on&&on in ee(t)?function(t){var e=le.call(t,on),n=t[on];try{t[on]=o;var r=!0}catch(t){}var i=fe.call(t);return r&&(e?t[on]=n:delete t[on]),i}(t):function(t){return fe.call(t)}(t)}function Qr(t,e){return t>e}function ti(t,e){return null!=t&&le.call(t,e)}function ei(t,e){return null!=t&&e in ee(t)}function ni(t,e,n){for(var i=n?Je:Ze,a=t[0].length,s=t.length,u=s,c=r(s),l=1/0,h=[];u--;){var p=t[u];u&&e&&(p=Qe(p,gn(e))),l=Xn(p.length,l),c[u]=!n&&(e||a>=120&&p.length>=120)?new _r(u&&p):o}p=t[0];var f=-1,d=c[0];t:for(;++f<a&&h.length<l;){var v=p[f],y=e?e(v):v;if(v=n||0!==v?v:0,!(d?bn(d,y):i(h,y,n))){for(u=s;--u;){var g=c[u];if(!(g?bn(g,y):i(t[u],y,n)))continue t}d&&d.push(y),h.push(v)}}return h}function ri(t,e,n){var r=null==(t=ea(t,e=Xi(e,t)))?t:t[la(Ea(e))];return null==r?o:De(r,t,n)}function ii(t){return Ls(t)&&Jr(t)==j}function oi(t,e,n,r,i){return t===e||(null==t||null==e||!Ls(t)&&!Ls(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var s=gs(t),u=gs(e),c=s?U:Uo(t),l=u?U:Uo(e),h=(c=c==j?Q:c)==Q,p=(l=l==j?Q:l)==Q,f=c==l;if(f&&_s(t)){if(!_s(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new wr),s||Vs(t)?qo(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!o(new we(t),new we(e)));case W:case D:case Z:return fs(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case $:var s=Pn;case nt:var u=r&v;if(s||(s=qn),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=y,a.set(t,e);var l=qo(s(t),s(e),r,i,o,a);return a.delete(t),l;case it:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,c,n,r,i,a);if(!(n&v)){var d=h&&le.call(t,"__wrapped__"),g=p&&le.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,b=g?e.value():e;return a||(a=new wr),i(m,b,n,r,a)}}return!!f&&(a||(a=new wr),function(t,e,n,r,i,a){var s=n&v,u=Co(t),c=u.length,l=Co(e).length;if(c!=l&&!s)return!1;for(var h=c;h--;){var p=u[h];if(!(s?p in e:le.call(e,p)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var d=!0;a.set(t,e),a.set(e,t);for(var y=s;++h<c;){p=u[h];var g=t[p],m=e[p];if(r)var b=s?r(m,g,p,e,t,a):r(g,m,p,t,e,a);if(!(b===o?g===m||i(g,m,n,r,a):b)){d=!1;break}y||(y="constructor"==p)}if(d&&!y){var A=t.constructor,_=e.constructor;A!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof A&&A instanceof A&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,i,a))}(t,e,n,r,oi,i))}function ai(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=ee(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=n[i])[0],l=t[c],h=u[1];if(s&&u[2]){if(l===o&&!(c in t))return!1}else{var p=new wr;if(r)var f=r(l,h,c,t,e,p);if(!(f===o?oi(h,l,v|y,r,p):f))return!1}}return!0}function si(t){return!(!Ss(t)||(e=t,pe&&pe in e))&&(Bs(t)?ye:Xt).test(ha(t));var e}function ui(t){return"function"==typeof t?t:null==t?Mu:"object"==typeof t?gs(t)?di(t[0],t[1]):fi(t):ku(t)}function ci(t){if(!Zo(t))return Wn(t);var e=[];for(var n in ee(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function li(t){if(!Ss(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Zo(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function hi(t,e){return t<e}function pi(t,e){var n=-1,i=bs(t)?r(t.length):[];return kr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function fi(t){var e=No(t);return 1==e.length&&e[0][2]?Qo(e[0][0],e[0][1]):function(n){return n===t||ai(n,t,e)}}function di(t,e){return Ko(t)&&Jo(e)?Qo(la(t),e):function(n){var r=Qs(n,t);return r===o&&r===e?tu(n,t):oi(e,r,v|y)}}function vi(t,e,n,r,i){t!==e&&Dr(e,function(a,s){if(Ss(a))i||(i=new wr),function(t,e,n,r,i,a,s){var u=na(t,n),c=na(e,n),l=s.get(c);if(l)Sr(t,n,l);else{var h=a?a(u,c,n+"",t,e,s):o,p=h===o;if(p){var f=gs(c),d=!f&&_s(c),v=!f&&!d&&Vs(c);h=c,f||d||v?gs(u)?h=u:As(u)?h=no(u):d?(p=!1,h=$i(c,!0)):v?(p=!1,h=Ji(c,!0)):h=[]:Cs(c)||ys(c)?(h=u,ys(u)?h=Ws(u):Ss(u)&&!Bs(u)||(h=Wo(c))):p=!1}p&&(s.set(c,h),i(h,c,r,a,s),s.delete(c)),Sr(t,n,h)}}(t,e,s,n,vi,r,i);else{var u=r?r(na(t,s),a,s+"",t,e,i):o;u===o&&(u=a),Sr(t,s,u)}},ou)}function yi(t,e){var n=t.length;if(n)return Xo(e+=e<0?n:0,n)?t[e]:o}function gi(t,e,n){var r=-1;return e=Qe(e.length?e:[Mu],gn(Vo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pi(t,function(t,n,i){return{criteria:Qe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Qi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function mi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=$r(t,a);n(s,a)&&Pi(o,Xi(a,t),s)}return o}function bi(t,e,n,r){var i=r?cn:un,o=-1,a=e.length,s=t;for(t===e&&(e=no(e)),n&&(s=Qe(t,gn(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Oe.call(s,u,1),Oe.call(t,u,1);return t}function Ai(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Xo(i)?Oe.call(t,i,1):Ni(t,i)}}return t}function _i(t,e){return t+kn(Hn()*(e-t+1))}function wi(t,e){var n="";if(!t||e<1||e>R)return n;do{e%2&&(n+=t),(e=kn(e/2))&&(t+=t)}while(e);return n}function Ei(t,e){return oa(ta(t,e,Mu),t+"")}function Bi(t){return Br(fu(t))}function xi(t,e){var n=fu(t);return ua(n,Rr(e,0,n.length))}function Pi(t,e,n,r){if(!Ss(t))return t;for(var i=-1,a=(e=Xi(e,t)).length,s=a-1,u=t;null!=u&&++i<a;){var c=la(e[i]),l=n;if(i!=s){var h=u[c];(l=r?r(h,c,u):o)===o&&(l=Ss(h)?h:Xo(e[i+1])?[]:{})}Lr(u,c,l),u=u[c]}return t}var Si=rr?function(t,e){return rr.set(t,e),t}:Mu,Li=fn?function(t,e){return fn(t,"toString",{configurable:!0,enumerable:!1,value:Su(e),writable:!0})}:Mu;function qi(t){return ua(fu(t))}function Mi(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function Ci(t,e){var n;return kr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Fi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=k){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Os(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Ii(t,e,Mu,n)}function Ii(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,s=e!=e,u=null===e,c=Os(e),l=e===o;i<a;){var h=kn((i+a)/2),p=n(t[h]),f=p!==o,d=null===p,v=p==p,y=Os(p);if(s)var g=r||v;else g=l?v&&(r||f):u?v&&f&&(r||!d):c?v&&f&&!d&&(r||!y):!d&&!y&&(r?p<=e:p<e);g?i=h+1:a=h}return Xn(a,N)}function Ri(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!fs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Oi(t){return"number"==typeof t?t:Os(t)?V:+t}function Vi(t){if("string"==typeof t)return t;if(gs(t))return Qe(t,Vi)+"";if(Os(t))return pr?pr.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Ti(t,e,n){var r=-1,i=Ze,o=t.length,s=!0,u=[],c=u;if(n)s=!1,i=Je;else if(o>=a){var l=e?null:Eo(t);if(l)return qn(l);s=!1,i=bn,c=new _r}else c=e?[]:u;t:for(;++r<o;){var h=t[r],p=e?e(h):h;if(h=n||0!==h?h:0,s&&p==p){for(var f=c.length;f--;)if(c[f]===p)continue t;e&&c.push(p),u.push(h)}else i(c,p,n)||(c!==u&&c.push(p),u.push(h))}return u}function Ni(t,e){return null==(t=ea(t,e=Xi(e,t)))||delete t[la(Ea(e))]}function ki(t,e,n,r){return Pi(t,e,n($r(t,e)),r)}function Gi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Mi(t,r?0:o,r?o+1:i):Mi(t,r?o+1:0,r?i:o)}function ji(t,e){var n=t;return n instanceof gr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Ui(t,e,n){var i=t.length;if(i<2)return i?Ti(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=Nr(a[o]||s,t[u],e,n));return Ti(Wr(a,1),e,n)}function zi(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function Wi(t){return As(t)?t:[]}function Di(t){return"function"==typeof t?t:Mu}function Xi(t,e){return gs(t)?t:Ko(t,e)?[t]:ca(Ds(t))}var Yi=Ei;function Ki(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Mi(t,e,n)}var Hi=On||function(t){return Ie.clearTimeout(t)};function $i(t,e){if(e)return t.slice();var n=t.length,r=Le?Le(n):new t.constructor(n);return t.copy(r),r}function Zi(t){var e=new t.constructor(t.byteLength);return new we(e).set(new we(t)),e}function Ji(t,e){var n=e?Zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Qi(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=Os(t),s=e!==o,u=null===e,c=e==e,l=Os(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function to(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,c=e.length,l=Dn(a-s,0),h=r(c+l),p=!i;++u<c;)h[u]=e[u];for(;++o<s;)(p||o<a)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function eo(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,c=-1,l=e.length,h=Dn(a-u,0),p=r(h+l),f=!i;++o<h;)p[o]=t[o];for(var d=o;++c<l;)p[d+c]=e[c];for(;++s<u;)(f||o<a)&&(p[d+n[s]]=t[o++]);return p}function no(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ro(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=r?r(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),i?Fr(n,u,c):Lr(n,u,c)}return n}function io(t,e){return function(n,r){var i=gs(n)?Xe:Mr,o=e?e():{};return i(n,t,Vo(r,2),o)}}function oo(t){return Ei(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&Yo(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=ee(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}function ao(t,e){return function(n,r){if(null==n)return n;if(!bs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ee(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function so(t){return function(e,n,r){for(var i=-1,o=ee(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function uo(t){return function(e){var n=xn(e=Ds(e))?Fn(e):o,r=n?n[0]:e.charAt(0),i=n?Ki(n,1).join(""):e.slice(1);return r[t]()+i}}function co(t){return function(e){return en(Bu(yu(e).replace(me,"")),t,"")}}function lo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dr(t.prototype),r=t.apply(n,e);return Ss(r)?r:n}}function ho(t){return function(e,n,r){var i=ee(e);if(!bs(e)){var a=Vo(n,3);e=iu(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function po(t){return Mo(function(e){var n=e.length,r=n,i=yr.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new ie(u);if(i&&!s&&"wrapper"==Ro(a))var s=new yr([],!0)}for(r=s?r:n;++r<n;){var c=Ro(a=e[r]),l="wrapper"==c?Io(a):o;s=l&&Ho(l[0])&&l[1]==(B|A|w|x)&&!l[4].length&&1==l[9]?s[Ro(l[0])].apply(s,l[3]):1==a.length&&Ho(a)?s[c]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&gs(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function fo(t,e,n,i,a,s,u,c,l,h){var p=e&B,f=e&g,d=e&m,v=e&(A|_),y=e&P,b=d?o:lo(t);return function g(){for(var m=arguments.length,A=r(m),_=m;_--;)A[_]=arguments[_];if(v)var w=Oo(g),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(A,w);if(i&&(A=to(A,i,a,v)),s&&(A=eo(A,s,u,v)),m-=E,v&&m<h){var B=Ln(A,w);return _o(t,e,fo,g.placeholder,n,A,B,c,l,h-m)}var x=f?n:this,P=d?x[t]:t;return m=A.length,c?A=function(t,e){for(var n=t.length,r=Xn(e.length,n),i=no(t);r--;){var a=e[r];t[r]=Xo(a,n)?i[a]:o}return t}(A,c):y&&m>1&&A.reverse(),p&&l<m&&(A.length=l),this&&this!==Ie&&this instanceof g&&(P=b||lo(P)),P.apply(x,A)}}function vo(t,e){return function(n,r){return function(t,e,n,r){return Yr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function yo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Vi(n),r=Vi(r)):(n=Oi(n),r=Oi(r)),i=t(n,r)}return i}}function go(t){return Mo(function(e){return e=Qe(e,gn(Vo())),Ei(function(n){var r=this;return t(e,function(t){return De(t,r,n)})})})}function mo(t,e){var n=(e=e===o?" ":Vi(e)).length;if(n<2)return n?wi(e,t):e;var r=wi(e,Nn(t/Cn(e)));return xn(e)?Ki(Fn(r),0,t).join(""):r.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&Yo(e,n,i)&&(n=i=o),e=Gs(e),n===o?(n=e,e=0):n=Gs(n),function(t,e,n,i){for(var o=-1,a=Dn(Nn((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,i=i===o?e<n?1:-1:Gs(i),t)}}function Ao(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=zs(e),n=zs(n)),t(e,n)}}function _o(t,e,n,r,i,a,s,u,c,l){var h=e&A;e|=h?w:E,(e&=~(h?E:w))&b||(e&=~(g|m));var p=[t,e,i,h?a:o,h?s:o,h?o:a,h?o:s,u,c,l],f=n.apply(o,p);return Ho(t)&&ra(f,p),f.placeholder=r,aa(f,t,e)}function wo(t){var e=te[t];return function(t,n){if(t=zs(t),n=null==n?0:Xn(js(n),292)){var r=(Ds(t)+"e").split("e");return+((r=(Ds(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Eo=tr&&1/qn(new tr([,-0]))[1]==I?function(t){return new tr(t)}:Ou;function Bo(t){return function(e){var n=Uo(e);return n==$?Pn(e):n==nt?Mn(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function xo(t,e,n,i,a,s,c,l){var p=e&m;if(!p&&"function"!=typeof t)throw new ie(u);var f=i?i.length:0;if(f||(e&=~(w|E),i=a=o),c=c===o?c:Dn(js(c),0),l=l===o?l:js(l),f-=a?a.length:0,e&E){var d=i,v=a;i=a=o}var y=p?o:Io(t),P=[t,e,n,i,a,d,v,s,c,l];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(g|m|B),a=r==B&&n==A||r==B&&n==x&&t[7].length<=e[8]||r==(B|x)&&e[7].length<=e[8]&&n==A;if(!o&&!a)return t;r&g&&(t[2]=e[2],i|=n&g?0:b);var s=e[3];if(s){var u=t[3];t[3]=u?to(u,s,e[4]):s,t[4]=u?Ln(t[3],h):e[4]}(s=e[5])&&(u=t[5],t[5]=u?eo(u,s,e[6]):s,t[6]=u?Ln(t[5],h):e[6]),(s=e[7])&&(t[7]=s),r&B&&(t[8]=null==t[8]?e[8]:Xn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(P,y),t=P[0],e=P[1],n=P[2],i=P[3],a=P[4],!(l=P[9]=P[9]===o?p?0:t.length:Dn(P[9]-f,0))&&e&(A|_)&&(e&=~(A|_)),e&&e!=g)S=e==A||e==_?function(t,e,n){var i=lo(t);return function a(){for(var s=arguments.length,u=r(s),c=s,l=Oo(a);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:Ln(u,l);return(s-=h.length)<n?_o(t,e,fo,a.placeholder,o,u,h,o,o,n-s):De(this&&this!==Ie&&this instanceof a?i:t,this,u)}}(t,e,l):e!=w&&e!=(g|w)||a.length?fo.apply(o,P):function(t,e,n,i){var o=e&g,a=lo(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),p=this&&this!==Ie&&this instanceof e?a:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return De(p,o?n:this,h)}}(t,e,n,i);else var S=function(t,e,n){var r=e&g,i=lo(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return aa((y?Si:ra)(S,P),t,e)}function Po(t,e,n,r){return t===o||fs(t,se[n])&&!le.call(r,n)?e:t}function So(t,e,n,r,i,a){return Ss(t)&&Ss(e)&&(a.set(e,t),vi(t,e,o,So,a),a.delete(e)),t}function Lo(t){return Cs(t)?o:t}function qo(t,e,n,r,i,a){var s=n&v,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var h=-1,p=!0,f=n&y?new _r:o;for(a.set(t,e),a.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=s?r(g,d,h,e,t,a):r(d,g,h,t,e,a);if(m!==o){if(m)continue;p=!1;break}if(f){if(!rn(e,function(t,e){if(!bn(f,e)&&(d===t||i(d,t,n,r,a)))return f.push(e)})){p=!1;break}}else if(d!==g&&!i(d,g,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Mo(t){return oa(ta(t,o,ma),t+"")}function Co(t){return Zr(t,iu,Go)}function Fo(t){return Zr(t,ou,jo)}var Io=rr?function(t){return rr.get(t)}:Ou;function Ro(t){for(var e=t.name+"",n=ir[e],r=le.call(ir,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Oo(t){return(le.call(fr,"placeholder")?fr:t).placeholder}function Vo(){var t=fr.iteratee||Cu;return t=t===Cu?ui:t,arguments.length?t(arguments[0],arguments[1]):t}function To(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function No(t){for(var e=iu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Jo(i)]}return e}function ko(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return si(n)?n:o}var Go=Gn?function(t){return null==t?[]:(t=ee(t),$e(Gn(t),function(e){return Re.call(t,e)}))}:Uu,jo=Gn?function(t){for(var e=[];t;)tn(e,Go(t)),t=Ce(t);return e}:Uu,Uo=Jr;function zo(t,e,n){for(var r=-1,i=(e=Xi(e,t)).length,o=!1;++r<i;){var a=la(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ps(i)&&Xo(a,i)&&(gs(t)||ys(t))}function Wo(t){return"function"!=typeof t.constructor||Zo(t)?{}:dr(Ce(t))}function Do(t){return gs(t)||ys(t)||!!(Te&&t&&t[Te])}function Xo(t,e){var n=typeof t;return!!(e=null==e?R:e)&&("number"==n||"symbol"!=n&&Kt.test(t))&&t>-1&&t%1==0&&t<e}function Yo(t,e,n){if(!Ss(n))return!1;var r=typeof e;return!!("number"==r?bs(n)&&Xo(e,n.length):"string"==r&&e in n)&&fs(n[e],t)}function Ko(t,e){if(gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Os(t))||Mt.test(t)||!qt.test(t)||null!=e&&t in ee(e)}function Ho(t){var e=Ro(t),n=fr[e];if("function"!=typeof n||!(e in gr.prototype))return!1;if(t===n)return!0;var r=Io(n);return!!r&&t===r[0]}(Zn&&Uo(new Zn(new ArrayBuffer(1)))!=ct||Jn&&Uo(new Jn)!=$||Qn&&"[object Promise]"!=Uo(Qn.resolve())||tr&&Uo(new tr)!=nt||er&&Uo(new er)!=at)&&(Uo=function(t){var e=Jr(t),n=e==Q?t.constructor:o,r=n?ha(n):"";if(r)switch(r){case or:return ct;case ar:return $;case sr:return"[object Promise]";case ur:return nt;case cr:return at}return e});var $o=ue?Bs:zu;function Zo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Jo(t){return t==t&&!Ss(t)}function Qo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in ee(n))}}function ta(t,e,n){return e=Dn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=Dn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),De(t,this,u)}}function ea(t,e){return e.length<2?t:$r(t,Mi(e,0,-1))}function na(t,e){if("__proto__"!=e)return t[e]}var ra=sa(Si),ia=Tn||function(t,e){return Ie.setTimeout(t,e)},oa=sa(Li);function aa(t,e,n){var r=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Tt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ye(G,function(n){var r="_."+n[0];e&n[1]&&!Ze(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Nt);return e?e[1].split(kt):[]}(r),n)))}function sa(t){var e=0,n=0;return function(){var r=Yn(),i=M-(r-n);if(n=r,i>0){if(++e>=q)return arguments[0]}else e=0;return t.apply(o,arguments)}}function ua(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=_i(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ca=function(t){var e=ss(t,function(t){return n.size===l&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ct,function(t,n,r,i){e.push(r?i.replace(jt,"$1"):n||t)}),e});function la(t){if("string"==typeof t||Os(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function ha(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function pa(t){if(t instanceof gr)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=no(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fa=Ei(function(t,e){return As(t)?Nr(t,Wr(e,1,As,!0)):[]}),da=Ei(function(t,e){var n=Ea(e);return As(n)&&(n=o),As(t)?Nr(t,Wr(e,1,As,!0),Vo(n,2)):[]}),va=Ei(function(t,e){var n=Ea(e);return As(n)&&(n=o),As(t)?Nr(t,Wr(e,1,As,!0),o,n):[]});function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:js(n);return i<0&&(i=Dn(r+i,0)),sn(t,Vo(e,3),i)}function ga(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=js(n),i=n<0?Dn(r+i,0):Xn(i,r-1)),sn(t,Vo(e,3),i,!0)}function ma(t){return null!=t&&t.length?Wr(t,1):[]}function ba(t){return t&&t.length?t[0]:o}var Aa=Ei(function(t){var e=Qe(t,Wi);return e.length&&e[0]===t[0]?ni(e):[]}),_a=Ei(function(t){var e=Ea(t),n=Qe(t,Wi);return e===Ea(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ni(n,Vo(e,2)):[]}),wa=Ei(function(t){var e=Ea(t),n=Qe(t,Wi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ni(n,o,e):[]});function Ea(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Ba=Ei(xa);function xa(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var Pa=Mo(function(t,e){var n=null==t?0:t.length,r=Ir(t,e);return Ai(t,Qe(e,function(t){return Xo(t,n)?+t:t}).sort(Qi)),r});function Sa(t){return null==t?t:$n.call(t)}var La=Ei(function(t){return Ti(Wr(t,1,As,!0))}),qa=Ei(function(t){var e=Ea(t);return As(e)&&(e=o),Ti(Wr(t,1,As,!0),Vo(e,2))}),Ma=Ei(function(t){var e=Ea(t);return e="function"==typeof e?e:o,Ti(Wr(t,1,As,!0),o,e)});function Ca(t){if(!t||!t.length)return[];var e=0;return t=$e(t,function(t){if(As(t))return e=Dn(t.length,e),!0}),yn(e,function(e){return Qe(t,pn(e))})}function Fa(t,e){if(!t||!t.length)return[];var n=Ca(t);return null==e?n:Qe(n,function(t){return De(e,o,t)})}var Ia=Ei(function(t,e){return As(t)?Nr(t,e):[]}),Ra=Ei(function(t){return Ui($e(t,As))}),Oa=Ei(function(t){var e=Ea(t);return As(e)&&(e=o),Ui($e(t,As),Vo(e,2))}),Va=Ei(function(t){var e=Ea(t);return e="function"==typeof e?e:o,Ui($e(t,As),o,e)}),Ta=Ei(Ca);var Na=Ei(function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,Fa(t,n)});function ka(t){var e=fr(t);return e.__chain__=!0,e}function Ga(t,e){return e(t)}var ja=Mo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof gr&&Xo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Ga,args:[i],thisArg:o}),new yr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var Ua=io(function(t,e,n){le.call(t,n)?++t[n]:Fr(t,n,1)});var za=ho(ya),Wa=ho(ga);function Da(t,e){return(gs(t)?Ye:kr)(t,Vo(e,3))}function Xa(t,e){return(gs(t)?Ke:Gr)(t,Vo(e,3))}var Ya=io(function(t,e,n){le.call(t,n)?t[n].push(e):Fr(t,n,[e])});var Ka=Ei(function(t,e,n){var i=-1,o="function"==typeof e,a=bs(t)?r(t.length):[];return kr(t,function(t){a[++i]=o?De(e,t,n):ri(t,e,n)}),a}),Ha=io(function(t,e,n){Fr(t,n,e)});function $a(t,e){return(gs(t)?Qe:pi)(t,Vo(e,3))}var Za=io(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ja=Ei(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Yo(t,e[0],e[1])?e=[]:n>2&&Yo(e[0],e[1],e[2])&&(e=[e[0]]),gi(t,Wr(e,1),[])}),Qa=Vn||function(){return Ie.Date.now()};function ts(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,xo(t,B,o,o,o,o,e)}function es(t,e){var n;if("function"!=typeof e)throw new ie(u);return t=js(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var ns=Ei(function(t,e,n){var r=g;if(n.length){var i=Ln(n,Oo(ns));r|=w}return xo(t,r,e,n,i)}),rs=Ei(function(t,e,n){var r=g|m;if(n.length){var i=Ln(n,Oo(rs));r|=w}return xo(e,r,t,n,i)});function is(t,e,n){var r,i,a,s,c,l,h=0,p=!1,f=!1,d=!0;if("function"!=typeof t)throw new ie(u);function v(e){var n=r,a=i;return r=i=o,h=e,s=t.apply(a,n)}function y(t){var n=t-l;return l===o||n>=e||n<0||f&&t-h>=a}function g(){var t=Qa();if(y(t))return m(t);c=ia(g,function(t){var n=e-(t-l);return f?Xn(n,a-(t-h)):n}(t))}function m(t){return c=o,d&&r?v(t):(r=i=o,s)}function b(){var t=Qa(),n=y(t);if(r=arguments,i=this,l=t,n){if(c===o)return function(t){return h=t,c=ia(g,e),p?v(t):s}(l);if(f)return c=ia(g,e),v(l)}return c===o&&(c=ia(g,e)),s}return e=zs(e)||0,Ss(n)&&(p=!!n.leading,a=(f="maxWait"in n)?Dn(zs(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){c!==o&&Hi(c),h=0,r=l=i=c=o},b.flush=function(){return c===o?s:m(Qa())},b}var os=Ei(function(t,e){return Tr(t,1,e)}),as=Ei(function(t,e,n){return Tr(t,zs(e)||0,n)});function ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(u);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ss.Cache||Ar),n}function us(t){if("function"!=typeof t)throw new ie(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ss.Cache=Ar;var cs=Yi(function(t,e){var n=(e=1==e.length&&gs(e[0])?Qe(e[0],gn(Vo())):Qe(Wr(e,1),gn(Vo()))).length;return Ei(function(r){for(var i=-1,o=Xn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return De(t,this,r)})}),ls=Ei(function(t,e){var n=Ln(e,Oo(ls));return xo(t,w,o,e,n)}),hs=Ei(function(t,e){var n=Ln(e,Oo(hs));return xo(t,E,o,e,n)}),ps=Mo(function(t,e){return xo(t,x,o,o,o,e)});function fs(t,e){return t===e||t!=t&&e!=e}var ds=Ao(Qr),vs=Ao(function(t,e){return t>=e}),ys=ii(function(){return arguments}())?ii:function(t){return Ls(t)&&le.call(t,"callee")&&!Re.call(t,"callee")},gs=r.isArray,ms=ke?gn(ke):function(t){return Ls(t)&&Jr(t)==ut};function bs(t){return null!=t&&Ps(t.length)&&!Bs(t)}function As(t){return Ls(t)&&bs(t)}var _s=jn||zu,ws=Ge?gn(Ge):function(t){return Ls(t)&&Jr(t)==D};function Es(t){if(!Ls(t))return!1;var e=Jr(t);return e==Y||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Cs(t)}function Bs(t){if(!Ss(t))return!1;var e=Jr(t);return e==K||e==H||e==z||e==tt}function xs(t){return"number"==typeof t&&t==js(t)}function Ps(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=R}function Ss(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ls(t){return null!=t&&"object"==typeof t}var qs=je?gn(je):function(t){return Ls(t)&&Uo(t)==$};function Ms(t){return"number"==typeof t||Ls(t)&&Jr(t)==Z}function Cs(t){if(!Ls(t)||Jr(t)!=Q)return!1;var e=Ce(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var Fs=Ue?gn(Ue):function(t){return Ls(t)&&Jr(t)==et};var Is=ze?gn(ze):function(t){return Ls(t)&&Uo(t)==nt};function Rs(t){return"string"==typeof t||!gs(t)&&Ls(t)&&Jr(t)==rt}function Os(t){return"symbol"==typeof t||Ls(t)&&Jr(t)==it}var Vs=We?gn(We):function(t){return Ls(t)&&Ps(t.length)&&!!Pe[Jr(t)]};var Ts=Ao(hi),Ns=Ao(function(t,e){return t<=e});function ks(t){if(!t)return[];if(bs(t))return Rs(t)?Fn(t):no(t);if(Ne&&t[Ne])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ne]());var e=Uo(t);return(e==$?Pn:e==nt?qn:fu)(t)}function Gs(t){return t?(t=zs(t))===I||t===-I?(t<0?-1:1)*O:t==t?t:0:0===t?t:0}function js(t){var e=Gs(t),n=e%1;return e==e?n?e-n:e:0}function Us(t){return t?Rr(js(t),0,T):0}function zs(t){if("number"==typeof t)return t;if(Os(t))return V;if(Ss(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ss(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var n=Dt.test(t);return n||Yt.test(t)?Me(t.slice(2),n?2:8):Wt.test(t)?V:+t}function Ws(t){return ro(t,ou(t))}function Ds(t){return null==t?"":Vi(t)}var Xs=oo(function(t,e){if(Zo(e)||bs(e))ro(e,iu(e),t);else for(var n in e)le.call(e,n)&&Lr(t,n,e[n])}),Ys=oo(function(t,e){ro(e,ou(e),t)}),Ks=oo(function(t,e,n,r){ro(e,ou(e),t,r)}),Hs=oo(function(t,e,n,r){ro(e,iu(e),t,r)}),$s=Mo(Ir);var Zs=Ei(function(t,e){t=ee(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&Yo(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=ou(a),u=-1,c=s.length;++u<c;){var l=s[u],h=t[l];(h===o||fs(h,se[l])&&!le.call(t,l))&&(t[l]=a[l])}return t}),Js=Ei(function(t){return t.push(o,So),De(su,o,t)});function Qs(t,e,n){var r=null==t?o:$r(t,e);return r===o?n:r}function tu(t,e){return null!=t&&zo(t,e,ei)}var eu=vo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n},Su(Mu)),nu=vo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Vo),ru=Ei(ri);function iu(t){return bs(t)?Er(t):ci(t)}function ou(t){return bs(t)?Er(t,!0):li(t)}var au=oo(function(t,e,n){vi(t,e,n)}),su=oo(function(t,e,n,r){vi(t,e,n,r)}),uu=Mo(function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,function(e){return e=Xi(e,t),r||(r=e.length>1),e}),ro(t,Fo(t),n),r&&(n=Or(n,p|f|d,Lo));for(var i=e.length;i--;)Ni(n,e[i]);return n});var cu=Mo(function(t,e){return null==t?{}:function(t,e){return mi(t,e,function(e,n){return tu(t,n)})}(t,e)});function lu(t,e){if(null==t)return{};var n=Qe(Fo(t),function(t){return[t]});return e=Vo(e),mi(t,n,function(t,n){return e(t,n[0])})}var hu=Bo(iu),pu=Bo(ou);function fu(t){return null==t?[]:mn(t,iu(t))}var du=co(function(t,e,n){return e=e.toLowerCase(),t+(n?vu(e):e)});function vu(t){return Eu(Ds(t).toLowerCase())}function yu(t){return(t=Ds(t))&&t.replace(Ht,wn).replace(be,"")}var gu=co(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),mu=co(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),bu=uo("toLowerCase");var Au=co(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var _u=co(function(t,e,n){return t+(n?" ":"")+Eu(e)});var wu=co(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Eu=uo("toUpperCase");function Bu(t,e,n){return t=Ds(t),(e=n?o:e)===o?function(t){return Ee.test(t)}(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.match(Gt)||[]}(t):t.match(e)||[]}var xu=Ei(function(t,e){try{return De(t,o,e)}catch(t){return Es(t)?t:new Jt(t)}}),Pu=Mo(function(t,e){return Ye(e,function(e){e=la(e),Fr(t,e,ns(t[e],t))}),t});function Su(t){return function(){return t}}var Lu=po(),qu=po(!0);function Mu(t){return t}function Cu(t){return ui("function"==typeof t?t:Or(t,p))}var Fu=Ei(function(t,e){return function(n){return ri(n,t,e)}}),Iu=Ei(function(t,e){return function(n){return ri(t,n,e)}});function Ru(t,e,n){var r=iu(e),i=Hr(e,r);null!=n||Ss(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Hr(e,iu(e)));var o=!(Ss(n)&&"chain"in n&&!n.chain),a=Bs(t);return Ye(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=no(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Ou(){}var Vu=go(Qe),Tu=go(He),Nu=go(rn);function ku(t){return Ko(t)?pn(la(t)):function(t){return function(e){return $r(e,t)}}(t)}var Gu=bo(),ju=bo(!0);function Uu(){return[]}function zu(){return!1}var Wu=yo(function(t,e){return t+e},0),Du=wo("ceil"),Xu=yo(function(t,e){return t/e},1),Yu=wo("floor");var Ku,Hu=yo(function(t,e){return t*e},1),$u=wo("round"),Zu=yo(function(t,e){return t-e},0);return fr.after=function(t,e){if("function"!=typeof e)throw new ie(u);return t=js(t),function(){if(--t<1)return e.apply(this,arguments)}},fr.ary=ts,fr.assign=Xs,fr.assignIn=Ys,fr.assignInWith=Ks,fr.assignWith=Hs,fr.at=$s,fr.before=es,fr.bind=ns,fr.bindAll=Pu,fr.bindKey=rs,fr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return gs(t)?t:[t]},fr.chain=ka,fr.chunk=function(t,e,n){e=(n?Yo(t,e,n):e===o)?1:Dn(js(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,u=r(Nn(i/e));a<i;)u[s++]=Mi(t,a,a+=e);return u},fr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},fr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(gs(n)?no(n):[n],Wr(e,1))},fr.cond=function(t){var e=null==t?0:t.length,n=Vo();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new ie(u);return[n(t[0]),t[1]]}):[],Ei(function(n){for(var r=-1;++r<e;){var i=t[r];if(De(i[0],this,n))return De(i[1],this,n)}})},fr.conforms=function(t){return function(t){var e=iu(t);return function(n){return Vr(n,t,e)}}(Or(t,p))},fr.constant=Su,fr.countBy=Ua,fr.create=function(t,e){var n=dr(t);return null==e?n:Cr(n,e)},fr.curry=function t(e,n,r){var i=xo(e,A,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},fr.curryRight=function t(e,n,r){var i=xo(e,_,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},fr.debounce=is,fr.defaults=Zs,fr.defaultsDeep=Js,fr.defer=os,fr.delay=as,fr.difference=fa,fr.differenceBy=da,fr.differenceWith=va,fr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,(e=n||e===o?1:js(e))<0?0:e,r):[]},fr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,0,(e=r-(e=n||e===o?1:js(e)))<0?0:e):[]},fr.dropRightWhile=function(t,e){return t&&t.length?Gi(t,Vo(e,3),!0,!0):[]},fr.dropWhile=function(t,e){return t&&t.length?Gi(t,Vo(e,3),!0):[]},fr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Yo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=js(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:js(r))<0&&(r+=i),r=n>r?0:Us(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},fr.filter=function(t,e){return(gs(t)?$e:zr)(t,Vo(e,3))},fr.flatMap=function(t,e){return Wr($a(t,e),1)},fr.flatMapDeep=function(t,e){return Wr($a(t,e),I)},fr.flatMapDepth=function(t,e,n){return n=n===o?1:js(n),Wr($a(t,e),n)},fr.flatten=ma,fr.flattenDeep=function(t){return null!=t&&t.length?Wr(t,I):[]},fr.flattenDepth=function(t,e){return null!=t&&t.length?Wr(t,e=e===o?1:js(e)):[]},fr.flip=function(t){return xo(t,P)},fr.flow=Lu,fr.flowRight=qu,fr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},fr.functions=function(t){return null==t?[]:Hr(t,iu(t))},fr.functionsIn=function(t){return null==t?[]:Hr(t,ou(t))},fr.groupBy=Ya,fr.initial=function(t){return null!=t&&t.length?Mi(t,0,-1):[]},fr.intersection=Aa,fr.intersectionBy=_a,fr.intersectionWith=wa,fr.invert=eu,fr.invertBy=nu,fr.invokeMap=Ka,fr.iteratee=Cu,fr.keyBy=Ha,fr.keys=iu,fr.keysIn=ou,fr.map=$a,fr.mapKeys=function(t,e){var n={};return e=Vo(e,3),Yr(t,function(t,r,i){Fr(n,e(t,r,i),t)}),n},fr.mapValues=function(t,e){var n={};return e=Vo(e,3),Yr(t,function(t,r,i){Fr(n,r,e(t,r,i))}),n},fr.matches=function(t){return fi(Or(t,p))},fr.matchesProperty=function(t,e){return di(t,Or(e,p))},fr.memoize=ss,fr.merge=au,fr.mergeWith=su,fr.method=Fu,fr.methodOf=Iu,fr.mixin=Ru,fr.negate=us,fr.nthArg=function(t){return t=js(t),Ei(function(e){return yi(e,t)})},fr.omit=uu,fr.omitBy=function(t,e){return lu(t,us(Vo(e)))},fr.once=function(t){return es(2,t)},fr.orderBy=function(t,e,n,r){return null==t?[]:(gs(e)||(e=null==e?[]:[e]),gs(n=r?o:n)||(n=null==n?[]:[n]),gi(t,e,n))},fr.over=Vu,fr.overArgs=cs,fr.overEvery=Tu,fr.overSome=Nu,fr.partial=ls,fr.partialRight=hs,fr.partition=Za,fr.pick=cu,fr.pickBy=lu,fr.property=ku,fr.propertyOf=function(t){return function(e){return null==t?o:$r(t,e)}},fr.pull=Ba,fr.pullAll=xa,fr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Vo(n,2)):t},fr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,o,n):t},fr.pullAt=Pa,fr.range=Gu,fr.rangeRight=ju,fr.rearg=ps,fr.reject=function(t,e){return(gs(t)?$e:zr)(t,us(Vo(e,3)))},fr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Vo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Ai(t,i),n},fr.rest=function(t,e){if("function"!=typeof t)throw new ie(u);return Ei(t,e=e===o?e:js(e))},fr.reverse=Sa,fr.sampleSize=function(t,e,n){return e=(n?Yo(t,e,n):e===o)?1:js(e),(gs(t)?xr:xi)(t,e)},fr.set=function(t,e,n){return null==t?t:Pi(t,e,n)},fr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Pi(t,e,n,r)},fr.shuffle=function(t){return(gs(t)?Pr:qi)(t)},fr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Yo(t,e,n)?(e=0,n=r):(e=null==e?0:js(e),n=n===o?r:js(n)),Mi(t,e,n)):[]},fr.sortBy=Ja,fr.sortedUniq=function(t){return t&&t.length?Ri(t):[]},fr.sortedUniqBy=function(t,e){return t&&t.length?Ri(t,Vo(e,2)):[]},fr.split=function(t,e,n){return n&&"number"!=typeof n&&Yo(t,e,n)&&(e=n=o),(n=n===o?T:n>>>0)?(t=Ds(t))&&("string"==typeof e||null!=e&&!Fs(e))&&!(e=Vi(e))&&xn(t)?Ki(Fn(t),0,n):t.split(e,n):[]},fr.spread=function(t,e){if("function"!=typeof t)throw new ie(u);return e=null==e?0:Dn(js(e),0),Ei(function(n){var r=n[e],i=Ki(n,0,e);return r&&tn(i,r),De(t,this,i)})},fr.tail=function(t){var e=null==t?0:t.length;return e?Mi(t,1,e):[]},fr.take=function(t,e,n){return t&&t.length?Mi(t,0,(e=n||e===o?1:js(e))<0?0:e):[]},fr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,(e=r-(e=n||e===o?1:js(e)))<0?0:e,r):[]},fr.takeRightWhile=function(t,e){return t&&t.length?Gi(t,Vo(e,3),!1,!0):[]},fr.takeWhile=function(t,e){return t&&t.length?Gi(t,Vo(e,3)):[]},fr.tap=function(t,e){return e(t),t},fr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(u);return Ss(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),is(t,e,{leading:r,maxWait:e,trailing:i})},fr.thru=Ga,fr.toArray=ks,fr.toPairs=hu,fr.toPairsIn=pu,fr.toPath=function(t){return gs(t)?Qe(t,la):Os(t)?[t]:no(ca(Ds(t)))},fr.toPlainObject=Ws,fr.transform=function(t,e,n){var r=gs(t),i=r||_s(t)||Vs(t);if(e=Vo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ss(t)&&Bs(o)?dr(Ce(t)):{}}return(i?Ye:Yr)(t,function(t,r,i){return e(n,t,r,i)}),n},fr.unary=function(t){return ts(t,1)},fr.union=La,fr.unionBy=qa,fr.unionWith=Ma,fr.uniq=function(t){return t&&t.length?Ti(t):[]},fr.uniqBy=function(t,e){return t&&t.length?Ti(t,Vo(e,2)):[]},fr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Ti(t,o,e):[]},fr.unset=function(t,e){return null==t||Ni(t,e)},fr.unzip=Ca,fr.unzipWith=Fa,fr.update=function(t,e,n){return null==t?t:ki(t,e,Di(n))},fr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:ki(t,e,Di(n),r)},fr.values=fu,fr.valuesIn=function(t){return null==t?[]:mn(t,ou(t))},fr.without=Ia,fr.words=Bu,fr.wrap=function(t,e){return ls(Di(e),t)},fr.xor=Ra,fr.xorBy=Oa,fr.xorWith=Va,fr.zip=Ta,fr.zipObject=function(t,e){return zi(t||[],e||[],Lr)},fr.zipObjectDeep=function(t,e){return zi(t||[],e||[],Pi)},fr.zipWith=Na,fr.entries=hu,fr.entriesIn=pu,fr.extend=Ys,fr.extendWith=Ks,Ru(fr,fr),fr.add=Wu,fr.attempt=xu,fr.camelCase=du,fr.capitalize=vu,fr.ceil=Du,fr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=zs(n))==n?n:0),e!==o&&(e=(e=zs(e))==e?e:0),Rr(zs(t),e,n)},fr.clone=function(t){return Or(t,d)},fr.cloneDeep=function(t){return Or(t,p|d)},fr.cloneDeepWith=function(t,e){return Or(t,p|d,e="function"==typeof e?e:o)},fr.cloneWith=function(t,e){return Or(t,d,e="function"==typeof e?e:o)},fr.conformsTo=function(t,e){return null==e||Vr(t,e,iu(e))},fr.deburr=yu,fr.defaultTo=function(t,e){return null==t||t!=t?e:t},fr.divide=Xu,fr.endsWith=function(t,e,n){t=Ds(t),e=Vi(e);var r=t.length,i=n=n===o?r:Rr(js(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},fr.eq=fs,fr.escape=function(t){return(t=Ds(t))&&xt.test(t)?t.replace(Et,En):t},fr.escapeRegExp=function(t){return(t=Ds(t))&&It.test(t)?t.replace(Ft,"\\$&"):t},fr.every=function(t,e,n){var r=gs(t)?He:jr;return n&&Yo(t,e,n)&&(e=o),r(t,Vo(e,3))},fr.find=za,fr.findIndex=ya,fr.findKey=function(t,e){return an(t,Vo(e,3),Yr)},fr.findLast=Wa,fr.findLastIndex=ga,fr.findLastKey=function(t,e){return an(t,Vo(e,3),Kr)},fr.floor=Yu,fr.forEach=Da,fr.forEachRight=Xa,fr.forIn=function(t,e){return null==t?t:Dr(t,Vo(e,3),ou)},fr.forInRight=function(t,e){return null==t?t:Xr(t,Vo(e,3),ou)},fr.forOwn=function(t,e){return t&&Yr(t,Vo(e,3))},fr.forOwnRight=function(t,e){return t&&Kr(t,Vo(e,3))},fr.get=Qs,fr.gt=ds,fr.gte=vs,fr.has=function(t,e){return null!=t&&zo(t,e,ti)},fr.hasIn=tu,fr.head=ba,fr.identity=Mu,fr.includes=function(t,e,n,r){t=bs(t)?t:fu(t),n=n&&!r?js(n):0;var i=t.length;return n<0&&(n=Dn(i+n,0)),Rs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&un(t,e,n)>-1},fr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:js(n);return i<0&&(i=Dn(r+i,0)),un(t,e,i)},fr.inRange=function(t,e,n){return e=Gs(e),n===o?(n=e,e=0):n=Gs(n),function(t,e,n){return t>=Xn(e,n)&&t<Dn(e,n)}(t=zs(t),e,n)},fr.invoke=ru,fr.isArguments=ys,fr.isArray=gs,fr.isArrayBuffer=ms,fr.isArrayLike=bs,fr.isArrayLikeObject=As,fr.isBoolean=function(t){return!0===t||!1===t||Ls(t)&&Jr(t)==W},fr.isBuffer=_s,fr.isDate=ws,fr.isElement=function(t){return Ls(t)&&1===t.nodeType&&!Cs(t)},fr.isEmpty=function(t){if(null==t)return!0;if(bs(t)&&(gs(t)||"string"==typeof t||"function"==typeof t.splice||_s(t)||Vs(t)||ys(t)))return!t.length;var e=Uo(t);if(e==$||e==nt)return!t.size;if(Zo(t))return!ci(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},fr.isEqual=function(t,e){return oi(t,e)},fr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?oi(t,e,o,n):!!r},fr.isError=Es,fr.isFinite=function(t){return"number"==typeof t&&Un(t)},fr.isFunction=Bs,fr.isInteger=xs,fr.isLength=Ps,fr.isMap=qs,fr.isMatch=function(t,e){return t===e||ai(t,e,No(e))},fr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,ai(t,e,No(e),n)},fr.isNaN=function(t){return Ms(t)&&t!=+t},fr.isNative=function(t){if($o(t))throw new Jt(s);return si(t)},fr.isNil=function(t){return null==t},fr.isNull=function(t){return null===t},fr.isNumber=Ms,fr.isObject=Ss,fr.isObjectLike=Ls,fr.isPlainObject=Cs,fr.isRegExp=Fs,fr.isSafeInteger=function(t){return xs(t)&&t>=-R&&t<=R},fr.isSet=Is,fr.isString=Rs,fr.isSymbol=Os,fr.isTypedArray=Vs,fr.isUndefined=function(t){return t===o},fr.isWeakMap=function(t){return Ls(t)&&Uo(t)==at},fr.isWeakSet=function(t){return Ls(t)&&Jr(t)==st},fr.join=function(t,e){return null==t?"":zn.call(t,e)},fr.kebabCase=gu,fr.last=Ea,fr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=js(n))<0?Dn(r+i,0):Xn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):sn(t,ln,i,!0)},fr.lowerCase=mu,fr.lowerFirst=bu,fr.lt=Ts,fr.lte=Ns,fr.max=function(t){return t&&t.length?Ur(t,Mu,Qr):o},fr.maxBy=function(t,e){return t&&t.length?Ur(t,Vo(e,2),Qr):o},fr.mean=function(t){return hn(t,Mu)},fr.meanBy=function(t,e){return hn(t,Vo(e,2))},fr.min=function(t){return t&&t.length?Ur(t,Mu,hi):o},fr.minBy=function(t,e){return t&&t.length?Ur(t,Vo(e,2),hi):o},fr.stubArray=Uu,fr.stubFalse=zu,fr.stubObject=function(){return{}},fr.stubString=function(){return""},fr.stubTrue=function(){return!0},fr.multiply=Hu,fr.nth=function(t,e){return t&&t.length?yi(t,js(e)):o},fr.noConflict=function(){return Ie._===this&&(Ie._=ve),this},fr.noop=Ou,fr.now=Qa,fr.pad=function(t,e,n){t=Ds(t);var r=(e=js(e))?Cn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return mo(kn(i),n)+t+mo(Nn(i),n)},fr.padEnd=function(t,e,n){t=Ds(t);var r=(e=js(e))?Cn(t):0;return e&&r<e?t+mo(e-r,n):t},fr.padStart=function(t,e,n){t=Ds(t);var r=(e=js(e))?Cn(t):0;return e&&r<e?mo(e-r,n)+t:t},fr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Kn(Ds(t).replace(Ot,""),e||0)},fr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Yo(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Gs(t),e===o?(e=t,t=0):e=Gs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Hn();return Xn(t+i*(e-t+qe("1e-"+((i+"").length-1))),e)}return _i(t,e)},fr.reduce=function(t,e,n){var r=gs(t)?en:dn,i=arguments.length<3;return r(t,Vo(e,4),n,i,kr)},fr.reduceRight=function(t,e,n){var r=gs(t)?nn:dn,i=arguments.length<3;return r(t,Vo(e,4),n,i,Gr)},fr.repeat=function(t,e,n){return e=(n?Yo(t,e,n):e===o)?1:js(e),wi(Ds(t),e)},fr.replace=function(){var t=arguments,e=Ds(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fr.result=function(t,e,n){var r=-1,i=(e=Xi(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[la(e[r])];a===o&&(r=i,a=n),t=Bs(a)?a.call(t):a}return t},fr.round=$u,fr.runInContext=t,fr.sample=function(t){return(gs(t)?Br:Bi)(t)},fr.size=function(t){if(null==t)return 0;if(bs(t))return Rs(t)?Cn(t):t.length;var e=Uo(t);return e==$||e==nt?t.size:ci(t).length},fr.snakeCase=Au,fr.some=function(t,e,n){var r=gs(t)?rn:Ci;return n&&Yo(t,e,n)&&(e=o),r(t,Vo(e,3))},fr.sortedIndex=function(t,e){return Fi(t,e)},fr.sortedIndexBy=function(t,e,n){return Ii(t,e,Vo(n,2))},fr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Fi(t,e);if(r<n&&fs(t[r],e))return r}return-1},fr.sortedLastIndex=function(t,e){return Fi(t,e,!0)},fr.sortedLastIndexBy=function(t,e,n){return Ii(t,e,Vo(n,2),!0)},fr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Fi(t,e,!0)-1;if(fs(t[n],e))return n}return-1},fr.startCase=_u,fr.startsWith=function(t,e,n){return t=Ds(t),n=null==n?0:Rr(js(n),0,t.length),e=Vi(e),t.slice(n,n+e.length)==e},fr.subtract=Zu,fr.sum=function(t){return t&&t.length?vn(t,Mu):0},fr.sumBy=function(t,e){return t&&t.length?vn(t,Vo(e,2)):0},fr.template=function(t,e,n){var r=fr.templateSettings;n&&Yo(t,e,n)&&(e=o),t=Ds(t),e=Ks({},e,r,Po);var i,a,s=Ks({},e.imports,r.imports,Po),u=iu(s),c=mn(s,u),l=0,h=e.interpolate||$t,p="__p += '",f=ne((e.escape||$t).source+"|"+h.source+"|"+(h===Lt?Ut:$t).source+"|"+(e.evaluate||$t).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++xe+"]")+"\n";t.replace(f,function(e,n,r,o,s,u){return r||(r=o),p+=t.slice(l,u).replace(Zt,Bn),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),p+="';\n";var v=e.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(bt,""):p).replace(At,"$1").replace(_t,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=xu(function(){return Qt(u,d+"return "+p).apply(o,c)});if(y.source=p,Es(y))throw y;return y},fr.times=function(t,e){if((t=js(t))<1||t>R)return[];var n=T,r=Xn(t,T);e=Vo(e),t-=T;for(var i=yn(r,e);++n<t;)e(n);return i},fr.toFinite=Gs,fr.toInteger=js,fr.toLength=Us,fr.toLower=function(t){return Ds(t).toLowerCase()},fr.toNumber=zs,fr.toSafeInteger=function(t){return t?Rr(js(t),-R,R):0===t?t:0},fr.toString=Ds,fr.toUpper=function(t){return Ds(t).toUpperCase()},fr.trim=function(t,e,n){if((t=Ds(t))&&(n||e===o))return t.replace(Rt,"");if(!t||!(e=Vi(e)))return t;var r=Fn(t),i=Fn(e);return Ki(r,An(r,i),_n(r,i)+1).join("")},fr.trimEnd=function(t,e,n){if((t=Ds(t))&&(n||e===o))return t.replace(Vt,"");if(!t||!(e=Vi(e)))return t;var r=Fn(t);return Ki(r,0,_n(r,Fn(e))+1).join("")},fr.trimStart=function(t,e,n){if((t=Ds(t))&&(n||e===o))return t.replace(Ot,"");if(!t||!(e=Vi(e)))return t;var r=Fn(t);return Ki(r,An(r,Fn(e))).join("")},fr.truncate=function(t,e){var n=S,r=L;if(Ss(e)){var i="separator"in e?e.separator:i;n="length"in e?js(e.length):n,r="omission"in e?Vi(e.omission):r}var a=(t=Ds(t)).length;if(xn(t)){var s=Fn(t);a=s.length}if(n>=a)return t;var u=n-Cn(r);if(u<1)return r;var c=s?Ki(s,0,u).join(""):t.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),Fs(i)){if(t.slice(u).search(i)){var l,h=c;for(i.global||(i=ne(i.source,Ds(zt.exec(i))+"g")),i.lastIndex=0;l=i.exec(h);)var p=l.index;c=c.slice(0,p===o?u:p)}}else if(t.indexOf(Vi(i),u)!=u){var f=c.lastIndexOf(i);f>-1&&(c=c.slice(0,f))}return c+r},fr.unescape=function(t){return(t=Ds(t))&&Bt.test(t)?t.replace(wt,In):t},fr.uniqueId=function(t){var e=++he;return Ds(t)+e},fr.upperCase=wu,fr.upperFirst=Eu,fr.each=Da,fr.eachRight=Xa,fr.first=ba,Ru(fr,(Ku={},Yr(fr,function(t,e){le.call(fr.prototype,e)||(Ku[e]=t)}),Ku),{chain:!1}),fr.VERSION="4.17.11",Ye(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fr[t].placeholder=fr}),Ye(["drop","take"],function(t,e){gr.prototype[t]=function(n){n=n===o?1:Dn(js(n),0);var r=this.__filtered__&&!e?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=Xn(n,r.__takeCount__):r.__views__.push({size:Xn(n,T),type:t+(r.__dir__<0?"Right":"")}),r},gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ye(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==C||3==n;gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Vo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ye(["head","last"],function(t,e){var n="take"+(e?"Right":"");gr.prototype[t]=function(){return this[n](1).value()[0]}}),Ye(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gr.prototype[t]=function(){return this.__filtered__?new gr(this):this[n](1)}}),gr.prototype.compact=function(){return this.filter(Mu)},gr.prototype.find=function(t){return this.filter(t).head()},gr.prototype.findLast=function(t){return this.reverse().find(t)},gr.prototype.invokeMap=Ei(function(t,e){return"function"==typeof t?new gr(this):this.map(function(n){return ri(n,t,e)})}),gr.prototype.reject=function(t){return this.filter(us(Vo(t)))},gr.prototype.slice=function(t,e){t=js(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=js(e))<0?n.dropRight(-e):n.take(e-t)),n)},gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gr.prototype.toArray=function(){return this.take(T)},Yr(gr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=fr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(fr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof gr,c=s[0],l=u||gs(e),h=function(t){var e=i.apply(fr,tn([t],s));return r&&p?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,f=!!this.__actions__.length,d=a&&!p,v=u&&!f;if(!a&&l){e=v?e:new gr(this);var y=t.apply(e,s);return y.__actions__.push({func:Ga,args:[h],thisArg:o}),new yr(y,p)}return d&&v?t.apply(this,s):(y=this.thru(h),d?r?y.value()[0]:y.value():y)})}),Ye(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);fr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(gs(i)?i:[],t)}return this[n](function(n){return e.apply(gs(n)?n:[],t)})}}),Yr(gr.prototype,function(t,e){var n=fr[e];if(n){var r=n.name+"";(ir[r]||(ir[r]=[])).push({name:e,func:n})}}),ir[fo(o,m).name]=[{name:"wrapper",func:o}],gr.prototype.clone=function(){var t=new gr(this.__wrapped__);return t.__actions__=no(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=no(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=no(this.__views__),t},gr.prototype.reverse=function(){if(this.__filtered__){var t=new gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=gs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Xn(e,t+a);break;case"takeRight":t=Dn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,p=0,f=Xn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return ji(t,this.__actions__);var d=[];t:for(;u--&&p<f;){for(var v=-1,y=t[c+=e];++v<h;){var g=l[v],m=g.iteratee,b=g.type,A=m(y);if(b==F)y=A;else if(!A){if(b==C)continue t;break t}}d[p++]=y}return d},fr.prototype.at=ja,fr.prototype.chain=function(){return ka(this)},fr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},fr.prototype.next=function(){this.__values__===o&&(this.__values__=ks(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},fr.prototype.plant=function(t){for(var e,n=this;n instanceof vr;){var r=pa(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},fr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gr){var e=t;return this.__actions__.length&&(e=new gr(this)),(e=e.reverse()).__actions__.push({func:Ga,args:[Sa],thisArg:o}),new yr(e,this.__chain__)}return this.thru(Sa)},fr.prototype.toJSON=fr.prototype.valueOf=fr.prototype.value=function(){return ji(this.__wrapped__,this.__actions__)},fr.prototype.first=fr.prototype.head,Ne&&(fr.prototype[Ne]=function(){return this}),fr}();Ie._=Rn,(i=function(){return Rn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(50),n(51)(t))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(53);t.exports=function(t,e,n){switch(n=n||{},e=e||1,t){case"point":case"points":case void 0:return r.point(e,n.bbox);case"polygon":case"polygons":return r.polygon(e,n.num_vertices,n.max_radial_length,n.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}}},function(t,e){function n(t){return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[a(),s()]}function r(t){return function(e,n){return[e[0]+t[0],e[1]+t[1]]}}function o(){return Math.random()-.5}function a(){return 360*o()}function s(){return 180*o()}function u(t){return{type:"Point",coordinates:t||[a(),s()]}}function c(t){return{type:"Feature",geometry:t,properties:{}}}function l(t){return{type:"FeatureCollection",features:t}}t.exports=function(){throw new Error("call .point() or .polygon() instead")},t.exports.position=n,t.exports.point=function(t,e){var r=[];for(i=0;i<t;i++)r.push(c(e?u(n(e)):u()));return l(r)},t.exports.polygon=function(t,e,o,a){"number"!=typeof e&&(e=10),"number"!=typeof o&&(o=10);var s=[];for(i=0;i<t;i++){var u=[],h=Array.apply(null,new Array(e+1)).map(Math.random);h.forEach(p),h.forEach(f),u[u.length-1]=u[0],u=u.map(r(n(a))),s.push(c({type:"Polygon",coordinates:[u]}))}function p(t,e,n){n[e]=e>0?t+n[e-1]:t}function f(t,e){t=2*t*Math.PI/h[h.length-1];var n=Math.random();u.push([n*o*Math.sin(t),n*o*Math.cos(t)])}return l(s)}},function(t,e){t.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i}},function(t,e,n){t.exports=n(56)},function(t,e,n){var r,i;
/**
* @license
*
* Regression.JS - Regression functions for javascript
* http://tom-alexander.github.com/regression-js/
*
* copyright(c) 2013 Tom Alexander
* Licensed under the MIT license.
*
* @module regression - Least-squares regression functions for JavaScript
**/void 0===(i="function"==typeof(r=function(){"use strict";function t(t,e){var n=t.reduce(function(t,e){return t+e[1]},0)/t.length,r=t.reduce(function(t,e){var r=e[1]-n;return t+r*r},0);return 1-t.reduce(function(t,n,r){var i=e[r],o=n[1]-i[1];return t+o*o},0)/r}function e(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var n={linear:function(n,r,i){for(var o,a,s,u=[0,0,0,0,0],c=n.length,l=0;l<c;l++)null!==n[l][1]&&(u[0]+=n[l][0],u[1]+=n[l][1],u[2]+=n[l][0]*n[l][0],u[3]+=n[l][0]*n[l][1],u[4]+=n[l][1]*n[l][1]);return a=(c*u[3]-u[0]*u[1])/(c*u[2]-u[0]*u[0]),s=u[1]/c-a*u[0]/c,o=n.map(function(t){var e=t[0];return[e,a*e+s]}),{r2:t(n,o),equation:[a,s],points:o,string:"y = "+e(a,i.precision)+"x + "+e(s,i.precision)}},linearthroughorigin:function(n,r,i){for(var o,a,s=[0,0],u=0;u<n.length;u++)null!==n[u][1]&&(s[0]+=n[u][0]*n[u][0],s[1]+=n[u][0]*n[u][1]);return o=s[1]/s[0],a=n.map(function(t){var e=t[0];return[e,o*e]}),{r2:t(n,a),equation:[o],points:a,string:"y = "+e(o,i.precision)+"x"}},exponential:function(n,r,i){for(var o,a,s,u,c=[0,0,0,0,0,0],l=0;l<n.length;l++)null!==n[l][1]&&(c[0]+=n[l][0],c[1]+=n[l][1],c[2]+=n[l][0]*n[l][0]*n[l][1],c[3]+=n[l][1]*Math.log(n[l][1]),c[4]+=n[l][0]*n[l][1]*Math.log(n[l][1]),c[5]+=n[l][0]*n[l][1]);return o=c[1]*c[2]-c[5]*c[5],a=Math.exp((c[2]*c[3]-c[5]*c[4])/o),s=(c[1]*c[4]-c[5]*c[3])/o,u=n.map(function(t){var e=t[0];return[e,a*Math.exp(s*e)]}),{r2:t(n,u),equation:[a,s],points:u,string:"y = "+e(a,i.precision)+"e^("+e(s,i.precision)+"x)"}},logarithmic:function(n,r,i){for(var o,a,s,u=[0,0,0,0],c=n.length,l=0;l<c;l++)null!==n[l][1]&&(u[0]+=Math.log(n[l][0]),u[1]+=n[l][1]*Math.log(n[l][0]),u[2]+=n[l][1],u[3]+=Math.pow(Math.log(n[l][0]),2));return a=(c*u[1]-u[2]*u[0])/(c*u[3]-u[0]*u[0]),o=(u[2]-a*u[0])/c,s=n.map(function(t){var e=t[0];return[e,o+a*Math.log(e)]}),{r2:t(n,s),equation:[o,a],points:s,string:"y = "+e(o,i.precision)+" + "+e(a,i.precision)+" ln(x)"}},power:function(n,r,i){for(var o,a,s,u=[0,0,0,0],c=n.length,l=0;l<c;l++)null!==n[l][1]&&(u[0]+=Math.log(n[l][0]),u[1]+=Math.log(n[l][1])*Math.log(n[l][0]),u[2]+=Math.log(n[l][1]),u[3]+=Math.pow(Math.log(n[l][0]),2));return a=(c*u[1]-u[2]*u[0])/(c*u[3]-u[0]*u[0]),o=Math.exp((u[2]-a*u[0])/c),s=n.map(function(t){var e=t[0];return[e,o*Math.pow(e,a)]}),{r2:t(n,s),equation:[o,a],points:s,string:"y = "+e(o,i.precision)+"x^"+e(a,i.precision)}},polynomial:function(n,r,i){var o,a,s,u,c,l,h,p,f=[],d=[],v=0,y=0,g=n.length;for(a=void 0===r?3:r+1,s=0;s<a;s++){for(c=0;c<g;c++)null!==n[c][1]&&(v+=Math.pow(n[c][0],s)*n[c][1]);for(f.push(v),v=0,o=[],u=0;u<a;u++){for(c=0;c<g;c++)null!==n[c][1]&&(y+=Math.pow(n[c][0],s+u));o.push(y),y=0}d.push(o)}for(d.push(f),h=function(t,e){var n=0,r=0,i=0,o=0,a=0,s=t.length-1,u=new Array(e);for(n=0;n<s;n++){for(o=n,r=n+1;r<s;r++)Math.abs(t[n][r])>Math.abs(t[n][o])&&(o=r);for(i=n;i<s+1;i++)a=t[i][n],t[i][n]=t[i][o],t[i][o]=a;for(r=n+1;r<s;r++)for(i=s;i>=n;i--)t[i][r]-=t[i][n]*t[n][r]/t[n][n]}for(r=s-1;r>=0;r--){for(a=0,i=r+1;i<s;i++)a+=t[i][r]*u[i];u[r]=(t[s][r]-a)/t[r][r]}return u}(d,a),l=n.map(function(t){var e=t[0],n=h.reduce(function(t,n,r){return t+n*Math.pow(e,r)},0);return[e,n]}),p="y = ",s=h.length-1;s>=0;s--)p+=s>1?e(h[s],i.precision)+"x^"+s+" + ":1===s?e(h[s],i.precision)+"x + ":e(h[s],i.precision);return{r2:t(n,l),equation:h,points:l,string:p}},lastvalue:function(n,r,i){for(var o=[],a=null,s=0;s<n.length;s++)null!==n[s][1]&&isFinite(n[s][1])?(a=n[s][1],o.push([n[s][0],n[s][1]])):o.push([n[s][0],a]);return{r2:t(n,o),equation:[a],points:o,string:""+e(a,i.precision)}}};return function(t,e,r,i){var o="object"==typeof r&&void 0===i?r:i||{};return o.precision||(o.precision=2),"string"==typeof t?n[t.toLowerCase()](e,r,o):null}})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r=t.exports={AABB:n(9),AngleLockEquation:n(21),Body:n(4),Broadphase:n(12),Capsule:n(25),Circle:n(13),Constraint:n(5),ContactEquation:n(14),ContactEquationPool:n(26),ContactMaterial:n(27),Convex:n(7),DistanceConstraint:n(28),Equation:n(2),EventEmitter:n(11),FrictionEquation:n(8),FrictionEquationPool:n(29),GearConstraint:n(30),GSSolver:n(31),Heightfield:n(61),Line:n(32),LockConstraint:n(33),Material:n(16),Narrowphase:n(34),NaiveBroadphase:n(62),Particle:n(19),Plane:n(18),Pool:n(6),RevoluteConstraint:n(37),PrismaticConstraint:n(40),Ray:n(10),RaycastResult:n(15),Box:n(36),RotationalVelocityEquation:n(38),SAPBroadphase:n(41),Shape:n(3),Solver:n(17),Spring:n(20),TopDownVehicle:n(63),LinearSpring:n(42),RotationalSpring:n(43),Utils:n(1),World:n(64),vec2:n(0),version:n(44).version};Object.defineProperty(r,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},function(t,e,n){var r=n(59),i=n(24),o=n(23);function a(){this.vertices=[]}t.exports=a,a.prototype.at=function(t){var e=this.vertices,n=e.length;return e[t<0?t%n+n:t%n]},a.prototype.first=function(){return this.vertices[0]},a.prototype.last=function(){return this.vertices[this.vertices.length-1]},a.prototype.clear=function(){this.vertices.length=0},a.prototype.append=function(t,e,n){if(void 0===e)throw new Error("From is not given!");if(void 0===n)throw new Error("To is not given!");if(n-1<e)throw new Error("lol1");if(n>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var r=e;r<n;r++)this.vertices.push(t.vertices[r])},a.prototype.makeCCW=function(){for(var t=0,e=this.vertices,n=1;n<this.vertices.length;++n)(e[n][1]<e[t][1]||e[n][1]==e[t][1]&&e[n][0]>e[t][0])&&(t=n);i.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},a.prototype.reverse=function(){for(var t=[],e=0,n=this.vertices.length;e!==n;e++)t.push(this.vertices.pop());this.vertices=t},a.prototype.isReflex=function(t){return i.right(this.at(t-1),this.at(t),this.at(t+1))};var s=[],u=[];function c(t,e,n,r,i){i=i||0;var a=e[1]-t[1],s=t[0]-e[0],u=a*t[0]+s*t[1],c=r[1]-n[1],l=n[0]-r[0],h=c*n[0]+l*n[1],p=a*l-c*s;return o.eq(p,0,i)?[0,0]:[(l*u-s*h)/p,(a*h-c*u)/p]}a.prototype.canSee=function(t,e){var n,o,a=s,c=u;if(i.leftOn(this.at(t+1),this.at(t),this.at(e))&&i.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;o=i.sqdist(this.at(t),this.at(e));for(var l=0;l!==this.vertices.length;++l)if((l+1)%this.vertices.length!==t&&l!==t&&i.leftOn(this.at(t),this.at(e),this.at(l+1))&&i.rightOn(this.at(t),this.at(e),this.at(l))&&(a[0]=this.at(t),a[1]=this.at(e),c[0]=this.at(l),c[1]=this.at(l+1),n=r.lineInt(a,c),i.sqdist(this.at(t),n)<o))return!1;return!0},a.prototype.copy=function(t,e,n){var r=n||new a;if(r.clear(),t<e)for(var i=t;i<=e;i++)r.vertices.push(this.vertices[i]);else{for(i=0;i<=e;i++)r.vertices.push(this.vertices[i]);for(i=t;i<this.vertices.length;i++)r.vertices.push(this.vertices[i])}return r},a.prototype.getCutEdges=function(){for(var t=[],e=[],n=[],r=new a,i=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var s=0;s<this.vertices.length;++s)if(this.canSee(o,s)){e=this.copy(o,s,r).getCutEdges(),n=this.copy(s,o,r).getCutEdges();for(var u=0;u<n.length;u++)e.push(n[u]);e.length<i&&(t=e,i=e.length,t.push([this.at(o),this.at(s)]))}return t},a.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},a.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].slice(r);if(o){e.splice(i,1),e.push(o[0],o[1]);break}}return e}r=t,n=this.vertices.indexOf(r[0]),i=this.vertices.indexOf(r[1]);return-1!=n&&-1!=i&&[this.copy(n,i),this.copy(i,n)]},a.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var n=0;n<e-1;n++)if(r.segmentsIntersect(t[e],t[e+1],t[n],t[n+1]))return!1;for(e=1;e<t.length-2;e++)if(r.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},a.prototype.quickDecomp=function(t,e,n,r,o,s){o=o||100,s=s||0,r=r||25,t=void 0!==t?t:[],e=e||[],n=n||[];var u=[0,0],l=[0,0],h=[0,0],p=0,f=0,d=0,v=0,y=0,g=0,m=0,b=new a,A=new a,_=this.vertices;if(_.length<3)return t;if(++s>o)return console.warn("quickDecomp: max level ("+o+") reached."),t;for(var w=0;w<this.vertices.length;++w)if(this.isReflex(w)){e.push(this.vertices[w]),p=f=Number.MAX_VALUE;for(var E=0;E<this.vertices.length;++E)i.left(this.at(w-1),this.at(w),this.at(E))&&i.rightOn(this.at(w-1),this.at(w),this.at(E-1))&&(h=c(this.at(w-1),this.at(w),this.at(E),this.at(E-1)),i.right(this.at(w+1),this.at(w),h)&&(d=i.sqdist(this.vertices[w],h))<f&&(f=d,l=h,g=E)),i.left(this.at(w+1),this.at(w),this.at(E+1))&&i.rightOn(this.at(w+1),this.at(w),this.at(E))&&(h=c(this.at(w+1),this.at(w),this.at(E),this.at(E+1)),i.left(this.at(w-1),this.at(w),h)&&(d=i.sqdist(this.vertices[w],h))<p&&(p=d,u=h,y=E));if(g==(y+1)%this.vertices.length)h[0]=(l[0]+u[0])/2,h[1]=(l[1]+u[1])/2,n.push(h),w<y?(b.append(this,w,y+1),b.vertices.push(h),A.vertices.push(h),0!=g&&A.append(this,g,this.vertices.length),A.append(this,0,w+1)):(0!=w&&b.append(this,w,this.vertices.length),b.append(this,0,y+1),b.vertices.push(h),A.vertices.push(h),A.append(this,g,w+1));else{if(g>y&&(y+=this.vertices.length),v=Number.MAX_VALUE,y<g)return t;for(E=g;E<=y;++E)i.leftOn(this.at(w-1),this.at(w),this.at(E))&&i.rightOn(this.at(w+1),this.at(w),this.at(E))&&(d=i.sqdist(this.at(w),this.at(E)))<v&&(v=d,m=E%this.vertices.length);w<m?(b.append(this,w,m+1),0!=m&&A.append(this,m,_.length),A.append(this,0,w+1)):(0!=w&&b.append(this,w,_.length),b.append(this,0,m+1),A.append(this,m,w+1))}return b.vertices.length<A.vertices.length?(b.quickDecomp(t,e,n,r,o,s),A.quickDecomp(t,e,n,r,o,s)):(A.quickDecomp(t,e,n,r,o,s),b.quickDecomp(t,e,n,r,o,s)),t}return t.push(this),t},a.prototype.removeCollinearPoints=function(t){for(var e=0,n=this.vertices.length-1;this.vertices.length>3&&n>=0;--n)i.collinear(this.at(n-1),this.at(n),this.at(n+1),t)&&(this.vertices.splice(n%this.vertices.length,1),n--,e++);return e}},function(t,e,n){var r=n(23);function i(){}t.exports=i,i.lineInt=function(t,e,n){n=n||0;var i,o,a,s,u,c,l,h=[0,0];return i=t[1][1]-t[0][1],o=t[0][0]-t[1][0],a=i*t[0][0]+o*t[0][1],s=e[1][1]-e[0][1],u=e[0][0]-e[1][0],c=s*e[0][0]+u*e[0][1],l=i*u-s*o,r.eq(l,0,n)||(h[0]=(u*a-o*c)/l,h[1]=(i*c-s*a)/l),h},i.segmentsIntersect=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1],a=r[0]-n[0],s=r[1]-n[1];if(a*o-s*i==0)return!1;var u=(i*(n[1]-t[1])+o*(t[0]-n[0]))/(a*o-s*i),c=(a*(t[1]-n[1])+s*(n[0]-t[0]))/(s*i-a*o);return u>=0&&u<=1&&c>=0&&c<=1}},function(t,e){var n={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,n=0,r=0;r<e;r+=2)n+=(t[r+2]-t[r])*(t[r+1]+t[r+3]);return.5*-(n+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var r=[],i=[],o=0;o<e;o++)i.push(o);o=0;for(var a=e;a>3;){var s=i[(o+0)%a],u=i[(o+1)%a],c=i[(o+2)%a],l=t[2*s],h=t[2*s+1],p=t[2*u],f=t[2*u+1],d=t[2*c],v=t[2*c+1],y=!1;if(n._convex(l,h,p,f,d,v)){y=!0;for(var g=0;g<a;g++){var m=i[g];if(m!=s&&m!=u&&m!=c&&n._PointInTriangle(t[2*m],t[2*m+1],l,h,p,f,d,v)){y=!1;break}}}if(y)r.push(s,u,c),i.splice((o+1)%a,1),a--,o=0;else if(o++>3*a)break}return r.push(i[0],i[1],i[2]),r},_PointInTriangle:function(t,e,n,r,i,o,a,s){var u=a-n,c=s-r,l=i-n,h=o-r,p=t-n,f=e-r,d=u*u+c*c,v=u*l+c*h,y=u*p+c*f,g=l*l+h*h,m=l*p+h*f,b=1/(d*g-v*v),A=(g*y-v*m)*b,_=(d*m-v*y)*b;return A>=0&&_>=0&&A+_<1},_convex:function(t,e,n,r,i,o){return(e-r)*(i-n)+(n-t)*(o-r)>=0}};t.exports=n},function(t,e,n){var r=n(3),i=n(0);n(1);function o(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=r.HEIGHTFIELD,r.call(this,t)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],n=t[0],r=0;r!==t.length;r++){var i=t[r];i>e&&(e=i),i<n&&(n=i)}this.maxValue=e,this.minValue=n},o.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.updateArea=function(){for(var t=this.heights,e=0,n=0;n<t.length-1;n++)e+=(t[n]+t[n+1])/2*this.elementWidth;this.area=e};var a=[i.create(),i.create(),i.create(),i.create()];o.prototype.computeAABB=function(t,e,n){i.set(a[0],0,this.maxValue),i.set(a[1],this.elementWidth*this.heights.length,this.maxValue),i.set(a[2],this.elementWidth*this.heights.length,this.minValue),i.set(a[3],0,this.minValue),t.setFromPoints(a,e,n)},o.prototype.getLineSegment=function(t,e,n){var r=this.heights,o=this.elementWidth;i.set(t,n*o,r[n]),i.set(e,(n+1)*o,r[n+1])},o.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},o.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return e=Math.min(this.heights.length,Math.max(e,0))};i.create();var s=i.create(),u=i.create(),c=i.create(),l=i.create(),h=i.create();i.fromValues(0,1);o.prototype.raycast=function(t,e,n,r){var o=e.from,a=e.to,p=(e.direction,s),f=u,d=c,v=l,y=h;i.toLocalFrame(v,o,n,r),i.toLocalFrame(y,a,n,r);var g=this.getClampedSegmentIndex(v),m=this.getClampedSegmentIndex(y);if(g>m){var b=g;g=m,m=b}for(var A=0;A<this.heights.length-1;A++){this.getLineSegment(f,d,A);var _=i.getLineSegmentsIntersectionFraction(v,y,f,d);if(_>=0&&(i.sub(p,d,f),i.rotate(p,p,r+Math.PI/2),i.normalize(p,p),e.reportIntersection(t,_,p,-1),t.shouldStop(e)))return}}},function(t,e,n){n(13),n(18),n(3),n(19);var r=n(12);n(0);function i(){r.call(this,r.NAIVE)}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.getCollisionPairs=function(t){var e=t.bodies,n=this.result;n.length=0;for(var i=0,o=e.length;i!==o;i++)for(var a=e[i],s=0;s<i;s++){var u=e[s];r.canCollide(a,u)&&this.boundingVolumeCheck(a,u)&&n.push(a,u)}return n},i.prototype.aabbQuery=function(t,e,n){n=n||[];for(var r=t.bodies,i=0;i<r.length;i++){var o=r[i];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(e)&&n.push(o)}return n}},function(t,e,n){var r=n(0),i=(n(1),n(5)),o=n(8),a=n(4);function s(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new a({mass:0}),this.world=null;var n=this;this.preStepCallback=function(){n.update()}}function u(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new o(t.chassisBody,t.groundBody),this.sideEquation=new o(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=r.fromValues(0,1),e.localForwardVector&&r.copy(this.localForwardVector,e.localForwardVector),this.localPosition=r.fromValues(0,0),e.localPosition&&r.copy(this.localPosition,e.localPosition),i.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}t.exports=s,s.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.addConstraint(n)}},s.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var n=this.wheels[e];t.removeConstraint(n)}this.world=null},s.prototype.addWheel=function(t){var e=new u(this,t);return this.wheels.push(e),e},s.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},u.prototype=new i,u.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},u.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var c=r.create(),l=r.create();u.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(l,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(c,l),r.dot(c,l)};var h=r.create();u.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),r.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),r.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),r.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),r.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),r.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),r.normalize(h,this.forwardEquation.t),r.scale(h,h,this.engineForce),this.vehicle.chassisBody.applyForce(h,this.forwardEquation.contactPointA)}},function(t,e,n){var r=n(31),i=(n(17),n(10),n(0)),o=n(13),a=n(7),s=(n(32),n(18)),u=n(25),c=n(19),l=n(11),h=n(4),p=(n(3),n(42),n(16)),f=n(27),d=(n(28),n(5),n(33),n(37),n(40),n(30),n(44),n(12),n(9)),v=n(41),y=n(34),g=n(1),m=n(65),b=n(67);n(43);function A(t){l.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new r,this.narrowphase=new y(this),this.islandManager=new b,this.gravity=i.fromValues(0,-9.78),t.gravity&&i.copy(this.gravity,t.gravity),this.frictionGravity=i.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new v,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new p,this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=A.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new m}t.exports=A,A.prototype=new Object(l.prototype),A.prototype.constructor=A,A.NO_SLEEPING=1,A.BODY_SLEEPING=2,A.ISLAND_SLEEPING=4,A.prototype.addConstraint=function(t){this.constraints.push(t)},A.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},A.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&g.splice(this.contactMaterials,e,1)},A.prototype.getContactMaterial=function(t,e){for(var n=this.contactMaterials,r=0,i=n.length;r!==i;r++){var o=n[r];if(o.materialA.id===t.id&&o.materialB.id===e.id||o.materialA.id===e.id&&o.materialB.id===t.id)return o}return!1},A.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&g.splice(this.constraints,e,1)};i.create(),i.create(),i.create(),i.create(),i.create(),i.create();var _=i.create(),w=i.fromValues(0,0),E=i.fromValues(0,0);i.fromValues(0,0),i.fromValues(0,0);A.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var r=0;this.accumulator>=t&&r<n;)this.internalStep(t),this.time+=t,this.accumulator-=t,r++;for(var o=this.accumulator%t/t,a=0;a!==this.bodies.length;a++){var s=this.bodies[a];i.lerp(s.interpolatedPosition,s.previousPosition,s.position,o),s.interpolatedAngle=s.previousAngle+o*(s.angle-s.previousAngle)}}};var B=[];A.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,n=this.springs,r=this.bodies,o=this.gravity,a=this.solver,s=this.bodies.length,u=this.broadphase,c=this.narrowphase,l=this.constraints,p=_,f=(i.scale,i.add),d=(i.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var v=i.length(this.gravity);0===v&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=v)}if(this.applyGravity)for(var y=0;y!==s;y++){var m=(b=r[y]).force;b.type===h.DYNAMIC&&b.sleepState!==h.SLEEPING&&(i.scale(p,o,b.mass*b.gravityScale),f(m,m,p))}if(this.applySpringForces)for(y=0;y!==e;y++){n[y].applyForce()}if(this.applyDamping)for(y=0;y!==s;y++){var b;(b=r[y]).type===h.DYNAMIC&&b.applyDamping(t)}var w=u.getCollisionPairs(this),E=this.disabledBodyCollisionPairs;for(y=E.length-2;y>=0;y-=2)for(var x=w.length-2;x>=0;x-=2)(E[y]===w[x]&&E[y+1]===w[x+1]||E[y+1]===w[x]&&E[y]===w[x+1])&&w.splice(x,2);var P=l.length;for(y=0;y!==P;y++){var S=l[y];if(!S.collideConnected)for(x=w.length-2;x>=0;x-=2)(S.bodyA===w[x]&&S.bodyB===w[x+1]||S.bodyB===w[x]&&S.bodyA===w[x+1])&&w.splice(x,2)}this.postBroadphaseEvent.pairs=w,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,c.reset(this);y=0;for(var L=w.length;y!==L;y+=2)for(var q=w[y],M=w[y+1],C=0,F=q.shapes.length;C!==F;C++)for(var I=q.shapes[C],R=I.position,O=I.angle,V=0,T=M.shapes.length;V!==T;V++){var N=M.shapes[V],k=N.position,G=N.angle,j=this.defaultContactMaterial;if(I.material&&N.material){var U=this.getContactMaterial(I.material,N.material);U&&(j=U)}this.runNarrowphase(c,q,I,R,O,M,N,k,G,j,this.frictionGravity)}for(y=0;y!==s;y++){(X=r[y])._wakeUpAfterNarrowphase&&(X.wakeUp(),X._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(B);var z=this.endContactEvent;for(V=B.length;V--;){var W=B[V];z.shapeA=W.shapeA,z.shapeB=W.shapeB,z.bodyA=W.bodyA,z.bodyB=W.bodyB,this.emit(z)}B.length=0}var D=this.preSolveEvent;D.contactEquations=c.contactEquations,D.frictionEquations=c.frictionEquations,this.emit(D),D.contactEquations=D.frictionEquations=null;P=l.length;for(y=0;y!==P;y++)l[y].update();if(c.contactEquations.length||c.frictionEquations.length||P)if(this.islandSplit){for(d.equations.length=0,g.appendArray(d.equations,c.contactEquations),g.appendArray(d.equations,c.frictionEquations),y=0;y!==P;y++)g.appendArray(d.equations,l[y].equations);d.split(this);for(y=0;y!==d.islands.length;y++){(H=d.islands[y]).equations.length&&a.solveIsland(t,H)}}else{for(a.addEquations(c.contactEquations),a.addEquations(c.frictionEquations),y=0;y!==P;y++)a.addEquations(l[y].equations);this.solveConstraints&&a.solve(t,this),a.removeAllEquations()}for(y=0;y!==s;y++){var X;(X=r[y]).integrate(t)}for(y=0;y!==s;y++)r[y].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var Y=this.impactEvent;for(y=0;y!==c.contactEquations.length;y++){var K=c.contactEquations[y];K.firstImpact&&(Y.bodyA=K.bodyA,Y.bodyB=K.bodyB,Y.shapeA=K.shapeA,Y.shapeB=K.shapeB,Y.contactEquation=K,this.emit(Y))}}if(this.sleepMode===A.BODY_SLEEPING)for(y=0;y!==s;y++)r[y].sleepTick(this.time,!1,t);else if(this.sleepMode===A.ISLAND_SLEEPING&&this.islandSplit){for(y=0;y!==s;y++)r[y].sleepTick(this.time,!0,t);for(y=0;y<this.islandManager.islands.length;y++){var H;(H=this.islandManager.islands[y]).wantsToSleep()&&H.sleep()}}this.stepping=!1;var $=this.bodiesToBeRemoved;for(y=0;y!==$.length;y++)this.removeBody($[y]);$.length=0,this.emit(this.postStepEvent)},A.prototype.runNarrowphase=function(t,e,n,r,o,a,s,u,c,l,p){if(0!=(n.collisionGroup&s.collisionMask)&&0!=(s.collisionGroup&n.collisionMask)){i.rotate(w,r,e.angle),i.rotate(E,u,a.angle),i.add(w,w,e.position),i.add(E,E,a.position);var f,d=o+e.angle,v=c+a.angle;t.enableFriction=l.friction>0,t.frictionCoefficient=l.friction,f=e.type===h.STATIC||e.type===h.KINEMATIC?a.mass:a.type===h.STATIC||a.type===h.KINEMATIC?e.mass:e.mass*a.mass/(e.mass+a.mass),t.slipForce=l.friction*p*f,t.restitution=l.restitution,t.surfaceVelocity=l.surfaceVelocity,t.frictionStiffness=l.frictionStiffness,t.frictionRelaxation=l.frictionRelaxation,t.stiffness=l.stiffness,t.relaxation=l.relaxation,t.contactSkinSize=l.contactSkinSize,t.enabledEquations=e.collisionResponse&&a.collisionResponse&&n.collisionResponse&&s.collisionResponse;var y=t[n.type|s.type],g=0;if(y){var m=n.sensor||s.sensor,b=t.frictionEquations.length;g=n.type<s.type?y.call(t,e,n,w,d,a,s,E,v,m):y.call(t,a,s,E,v,e,n,w,d,m);var A=t.frictionEquations.length-b;if(g){if(e.allowSleep&&e.type===h.DYNAMIC&&e.sleepState===h.SLEEPING&&a.sleepState===h.AWAKE&&a.type!==h.STATIC)i.squaredLength(a.velocity)+Math.pow(a.angularVelocity,2)>=2*Math.pow(a.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(a.allowSleep&&a.type===h.DYNAMIC&&a.sleepState===h.SLEEPING&&e.sleepState===h.AWAKE&&e.type!==h.STATIC)i.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(a._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,n,a,s),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(n,s)){var _=this.beginContactEvent;if(_.shapeA=n,_.shapeB=s,_.bodyA=e,_.bodyB=a,_.contactEquations.length=0,"number"==typeof g)for(var B=t.contactEquations.length-g;B<t.contactEquations.length;B++)_.contactEquations.push(t.contactEquations[B]);this.emit(_)}if("number"==typeof g&&A>1)for(B=t.frictionEquations.length-A;B<t.frictionEquations.length;B++){var x=t.frictionEquations[B];x.setSlipForce(x.getSlipForce()/A)}}}}},A.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},A.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&g.splice(this.springs,e,1)},A.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},A.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(g.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},A.prototype.getBodyById=function(t){for(var e=this.bodies,n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return!1},A.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},A.prototype.enableBodyCollision=function(t,e){for(var n=this.disabledBodyCollisionPairs,r=0;r<n.length;r+=2)if(n[r]===t&&n[r+1]===e||n[r+1]===t&&n[r]===e)return void n.splice(r,2)},A.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var n=this.bodies;for(e=n.length-1;e>=0;e--)this.removeBody(n[e]);var r=this.springs;for(e=r.length-1;e>=0;e--)this.removeSpring(r[e]);var i=this.contactMaterials;for(e=i.length-1;e>=0;e--)this.removeContactMaterial(i[e]);A.apply(this)};var x=i.create(),P=(i.fromValues(0,0),i.fromValues(0,0));A.prototype.hitTest=function(t,e,n){n=n||0;var r=new h({position:t}),l=new c,p=t,f=x,d=P;r.addShape(l);for(var v=this.narrowphase,y=[],g=0,m=e.length;g!==m;g++)for(var b=e[g],A=0,_=b.shapes.length;A!==_;A++){var w=b.shapes[A];i.rotate(f,w.position,b.angle),i.add(f,f,b.position);var E=w.angle+b.angle;(w instanceof o&&v.circleParticle(b,w,f,E,r,l,p,0,!0)||w instanceof a&&v.particleConvex(r,l,p,0,b,w,f,E,!0)||w instanceof s&&v.particlePlane(r,l,p,0,b,w,f,E,!0)||w instanceof u&&v.particleCapsule(r,l,p,0,b,w,f,E,!0)||w instanceof c&&i.squaredLength(i.sub(d,f,t))<n*n)&&y.push(b)}return y},A.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,n=0;n!==e.length;n++)for(var r=e[n],i=0;i!==r.equations.length;i++){var o=r.equations[i];o.stiffness=t,o.needsUpdate=!0}var a=this.contactMaterials;for(n=0;n!==a.length;n++){(r=a[n]).stiffness=r.frictionStiffness=t}(r=this.defaultContactMaterial).stiffness=r.frictionStiffness=t},A.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var n=this.constraints[e],r=0;r!==n.equations.length;r++){var i=n.equations[r];i.relaxation=t,i.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(n=this.contactMaterials[e]).relaxation=n.frictionRelaxation=t}(n=this.defaultContactMaterial).relaxation=n.frictionRelaxation=t};var S=new d,L=[];A.prototype.raycast=function(t,e){return e.getAABB(S),this.broadphase.aabbQuery(this,S,L),e.intersectBodies(t,L),L.length=0,t.hasHit()}},function(t,e,n){var r=n(35),i=(n(45),n(66));n(1);function o(){this.overlappingShapesLastState=new r,this.overlappingShapesCurrentState=new r,this.recordPool=new i({size:16}),this.tmpDict=new r,this.tmpArray1=[]}t.exports=o,o.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,n=t.keys.length;n--;){var r=t.keys[n],i=t.getByKey(r);e.getByKey(r);i&&this.recordPool.release(i)}t.reset(),t.copy(e),e.reset()},o.prototype.setOverlapping=function(t,e,n,r){this.overlappingShapesLastState;var i=this.overlappingShapesCurrentState;if(!i.get(e.id,r.id)){var o=this.recordPool.get();o.set(t,e,n,r),i.set(e.id,r.id,o)}},o.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},o.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},o.prototype.bodiesAreOverlapping=function(t,e){for(var n=this.overlappingShapesCurrentState,r=n.keys.length;r--;){var i=n.keys[r],o=n.data[i];if(o.bodyA===t&&o.bodyB===e||o.bodyA===e&&o.bodyB===t)return!0}return!1},o.prototype.getDiff=function(t,e,n){var r=t,i=e;(n=n||[]).length=0;for(var o=i.keys.length;o--;){var a=i.keys[o],s=i.data[a];if(!s)throw new Error("Key "+a+" had no data!");r.data[a]||n.push(s)}return n},o.prototype.isNewOverlap=function(t,e){var n=0|t.id,r=0|e.id,i=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!i.get(n,r)&&!!o.get(n,r)},o.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getBodyDiff=function(t,e){e=e||[];for(var n=this.tmpDict,r=t.length;r--;){var i=t[r];n.set(0|i.bodyA.id,0|i.bodyB.id,i)}for(r=n.keys.length;r--;){(i=n.getByKey(n.keys[r]))&&e.push(i.bodyA,i.bodyB)}return n.reset(),e}},function(t,e,n){var r=n(45),i=n(6);function o(){i.apply(this,arguments)}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},function(t,e,n){n(0),n(46),n(47);var r=n(68),i=n(69),o=n(4);function a(t){this.nodePool=new r({size:16}),this.islandPool=new i({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t.exports=a,a.getUnvisitedNode=function(t){for(var e=t.length,n=0;n!==e;n++){var r=t[n];if(!r.visited&&r.body.type===o.DYNAMIC)return r}return!1},a.prototype.visit=function(t,e,n){e.push(t.body);for(var r=t.equations.length,i=0;i!==r;i++){var o=t.equations[i];-1===n.indexOf(o)&&n.push(o)}},a.prototype.bfs=function(t,e,n){var r=this.queue;for(r.length=0,r.push(t),t.visited=!0,this.visit(t,e,n);r.length;)for(var i,s=r.pop();i=a.getUnvisitedNode(s.neighbors);)i.visited=!0,this.visit(i,e,n),i.body.type===o.DYNAMIC&&r.push(i)},a.prototype.split=function(t){for(var e=t.bodies,n=this.nodes,r=this.equations;n.length;)this.nodePool.release(n.pop());for(var i=0;i!==e.length;i++){var o=this.nodePool.get();o.body=e[i],n.push(o)}for(var s=0;s!==r.length;s++){var u=r[s],c=(i=e.indexOf(u.bodyA),e.indexOf(u.bodyB)),l=n[i],h=n[c];l.neighbors.push(h),h.neighbors.push(l),l.equations.push(u),h.equations.push(u)}var p,f=this.islands;for(i=0;i<f.length;i++)this.islandPool.release(f[i]);for(f.length=0;p=a.getUnvisitedNode(n);){var d=this.islandPool.get();this.bfs(p,d.bodies,d.equations),f.push(d)}return f}},function(t,e,n){var r=n(47),i=n(6);function o(){i.apply(this,arguments)}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.reset(),this}},function(t,e,n){var r=n(46),i=n(6);function o(){i.apply(this,arguments)}t.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.create=function(){return new r},o.prototype.destroy=function(t){return t.reset(),this}}]);